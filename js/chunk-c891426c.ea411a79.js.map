{"version":3,"sources":["webpack:///./src/apis/user.js","webpack:///./src/utils/debounceThrottle.js","webpack:///./src/components/captcha.vue","webpack:///./src/components/captcha.vue?79de","webpack:///./src/components/layoutHeader.vue?97b1","webpack:///./src/components/layoutHeader.vue","webpack:///./src/components/layoutHeader.vue?c71c","webpack:///./src/views/register/index.vue","webpack:///./src/views/register/index.vue?9548","webpack:///./src/views/register/index.vue?992a"],"names":["login","data","request","url","method","getUserInfo","getEmailCode","emailLogin","register","throttle","func","ms","isThrottled","apply","this","arguments","setTimeout","canvas","ref","updateCaptcha","Event","handleGetCaptcha","canvasElement","codeCount","ctx","getContext","save","addEventListener","getCaptcha","restore","clearRect","result","font","textBaseline","translate","i","code","getRandomInt","fillStyle","getRandomRGB","rotate","getRandomAngle","Math","PI","fillText","emits","max","min","floor","random","maxAbsolute","isMinus","onMounted","value","dispatchEvent","watch","props","noMatchCode","__exports__","router","useRouter","handleBackLogin","push","name","registerFrom","textGetCodeButton","captchaCode","emailErrorMsg","title","isRegister","buttonText","finishMsg","codeType","route","useRoute","meta","registerData","reactive","userEmail","password","rePassword","emailCode","captcha","buttonGetCode","isCodeCD","rules","required","message","trigger","validator","checkEmail","checkPassword","checkRePassword","checkCaptcha","handleGetEmailCode","codeCD","classList","toggle","countCD","setInterval","clearInterval","validateField","isValid","ElMessage","type","then","res","console","log","rej","rule","callback","Error","test","length","handleRegister","registerForm","validate","resetFields"],"mappings":"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","file":"js/chunk-c891426c.ea411a79.js","sourcesContent":["import request from '@/utils/axios'\r\n\r\nexport function login(data) {\r\n  return request({\r\n    url: '/api/user/login',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\n\r\nexport function getUserInfo() {\r\n  return request({\r\n    url: 'api/user/getUserInfo',\r\n    method: 'GET'\r\n  })\r\n}\r\n\r\nexport function getEmailCode(data) {\r\n  return request({\r\n    url: '/api/user/getEmailCode',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\nexport function emailLogin(data) {\r\n  return request({\r\n    url: '/api/user/emailLogin',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\nexport function register(data) {\r\n  return request({\r\n    url: '/api/user/register',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\n","export function debounce(func, ms) {\r\n  let timer\r\n  return function() {\r\n    clearTimeout(timer)\r\n    setTimeout(() => func.apply(this, arguments), ms)\r\n  }\r\n}\r\n\r\nexport function throttle(func, ms) {\r\n  let isThrottled = false\r\n\r\n  return function() {\r\n    if (isThrottled) {\r\n      return\r\n    }\r\n    isThrottled = true\r\n\r\n    func.apply(this, arguments)\r\n\r\n    setTimeout(() => {\r\n      isThrottled = false\r\n    }, ms)\r\n  }\r\n}\r\n","<template>\r\n  <canvas ref=\"canvas\" width=\"80\" height=\"30\" />\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, defineEmits, defineProps, watch } from 'vue'\r\nimport { throttle } from '@/utils/debounceThrottle'\r\n\r\nconst emits = defineEmits(['getCaptcha'])\r\nconst props = defineProps({\r\n  noMatchCode: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\nconst canvas = ref(null)\r\n\r\nconst updateCaptcha = new Event('updateCaptcha')\r\n\r\nonMounted(() => {\r\n  canvas.value.addEventListener('click', throttle(() => canvas.value.dispatchEvent(updateCaptcha), 500))\r\n  handleGetCaptcha(canvas.value, 4)\r\n\r\n  watch(\r\n    () => props.noMatchCode,\r\n    () => {\r\n      canvas.value.dispatchEvent(updateCaptcha)\r\n    }\r\n  )\r\n})\r\n\r\nfunction handleGetCaptcha(canvasElement, codeCount) {\r\n  const ctx = canvasElement.getContext('2d')\r\n  ctx.save()\r\n  canvasElement.addEventListener('updateCaptcha', () => getCaptcha(ctx, codeCount))\r\n  getCaptcha(ctx, codeCount)\r\n}\r\n\r\nfunction getCaptcha(ctx, codeCount) {\r\n  ctx.restore()\r\n  ctx.restore()\r\n  ctx.clearRect(0, 0, 80, 30)\r\n  ctx.save()\r\n  let result = ''\r\n  // 设置字体样式\r\n  ctx.font = 'bold 15px serif'\r\n  // 设置文字基线\r\n  ctx.textBaseline = 'top'\r\n  // 设置初始落点\r\n  ctx.translate(10, 5)\r\n  // 保存初始设置\r\n  ctx.save()\r\n\r\n  let i = 0\r\n  while (i < codeCount) {\r\n    const code = getRandomInt(9, 0)\r\n    result = result + '' + code\r\n\r\n    ctx.restore()\r\n    ctx.save()\r\n    ctx.fillStyle = getRandomRGB()\r\n    ctx.translate((i) * getRandomInt(20, 15), 0)\r\n    ctx.rotate(getRandomAngle(40) * Math.PI / 180)\r\n    ctx.fillText(code, 0, 0)\r\n\r\n    i++\r\n  }\r\n  emits('getCaptcha', result)\r\n}\r\n\r\nfunction getRandomInt(max = 1, min = 0) {\r\n  return Math.floor(Math.random() * (max - min)) + min\r\n}\r\n\r\nfunction getRandomRGB() {\r\n  return `rgb(${getRandomInt(255)}, ${getRandomInt(255)}, ${getRandomInt(255)})`\r\n}\r\n\r\nfunction getRandomAngle(maxAbsolute, isMinus = 0) {\r\n  if (isMinus === 0) {\r\n    if (Math.random() >= 0.5) {\r\n      return getRandomAngle(maxAbsolute, 1)\r\n    } else {\r\n      return getRandomAngle(maxAbsolute, -1)\r\n    }\r\n  } else if (isMinus < 0) {\r\n    return -getRandomInt(maxAbsolute)\r\n  } else {\r\n    return getRandomInt(maxAbsolute)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import script from \"./captcha.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./captcha.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","export * from \"-!../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/index.js??ref--1-1!./layoutHeader.vue?vue&type=style&index=0&id=89c18978&scoped=true&lang=css\"","<template>\r\n  <div id=\"header\">\r\n    <div id=\"back-icon\">\r\n      <slot name=\"backIcon\" />\r\n    </div>\r\n    <div id=\"icon-logo\" class=\"slot\">\r\n      <img src=\"https://img1.imgtp.com/2022/10/15/TP8TMu93.png\" alt=\"logo\" height=\"48\" width=\"78\" @click=\"handleBackLogin\">\r\n    </div>\r\n    <div id=\"avatar\" class=\"slot\">\r\n      <slot name=\"avatar\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useRouter } from 'vue-router'\r\nconst router = useRouter()\r\n\r\nfunction handleBackLogin() {\r\n  router.push({ name: 'login' })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#header {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: #fefefe;\r\n  box-shadow: #b2b2b2 0 3px 10px;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 999;\r\n}\r\n#back-icon {\r\n  margin-left: 2em;\r\n  width: 92px;\r\n}\r\n#icon-logo {\r\n  margin-right: auto;\r\n  margin-left: 3%;\r\n  background-color: #0093E9;\r\n  background-image: linear-gradient(151deg, #0093E9 0%, #80D0C7 68%);\r\n  border-radius: 10px;\r\n}\r\n#avatar {\r\n  margin-right: 3em;\r\n}\r\n.slot {\r\n  margin-top: 3px;\r\n  margin-bottom: 3px;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","import script from \"./layoutHeader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./layoutHeader.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./layoutHeader.vue?vue&type=style&index=0&id=89c18978&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\javaWeb\\\\vuePro\\\\xin_gong_ke\\\\iot-page\\\\node_modules\\\\.pnpm\\\\vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-89c18978\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"content\">\r\n    <passport-header />\r\n    <div id=\"body\">\r\n      <div id=\"body-header\">\r\n        <router-link to=\"login\">已有账号？去登录</router-link>\r\n      </div>\r\n      <div id=\"form-content\">\r\n        <el-form ref=\"registerFrom\" :model=\"registerData\" :rules=\"rules\" label-width=\"auto\" label-position=\"left\">\r\n          <span id=\"form-title\">{{ title }}</span>\r\n          <el-form-item label=\"邮箱地址\" :error=\"emailErrorMsg\" prop=\"userEmail\">\r\n            <el-input v-model=\"registerData.userEmail\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"图形验证码\" prop=\"captcha\">\r\n            <el-input v-model=\"registerData.captcha\">\r\n              <template #append>\r\n                <captcha :no-match-code=\"noMatchCode\" @get-captcha=\"handleGetCaptcha\" />\r\n              </template>\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮箱验证码\" prop=\"emailCode\">\r\n            <el-input v-model=\"registerData.emailCode\">\r\n              <template #append>\r\n                <el-button\r\n                  type=\"primary\"\r\n                  :disabled=\"buttonGetCode.isCodeCD\"\r\n                  @click=\"handleGetEmailCode(registerFrom, textGetCodeButton)\"\r\n                >\r\n                  <span id=\"text-getCode-button\" ref=\"textGetCodeButton\">{{ buttonGetCode.buttonText }}</span>\r\n                </el-button>\r\n              </template>\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"设置密码\" prop=\"password\">\r\n            <el-input v-model=\"registerData.password\" type=\"password\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"重复密码\" prop=\"rePassword\">\r\n            <el-input v-model=\"registerData.rePassword\" type=\"password\" />\r\n          </el-form-item>\r\n          <button id=\"button-register\" @click=\"handleRegister(registerFrom)\"><span>{{ buttonText }}</span></button>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport PassportHeader from '@/components/layoutHeader'\r\nimport Captcha from '@/components/captcha'\r\nimport { reactive, ref } from 'vue'\r\nimport { getEmailCode, register } from '@/apis/user'\r\nimport { ElMessage } from 'element-plus'\r\nimport { useRouter, useRoute } from 'vue-router'\r\n\r\nconst registerFrom = ref(null)\r\nconst textGetCodeButton = ref(null)\r\nconst noMatchCode = ref(false)\r\nconst captchaCode = ref('')\r\nconst emailErrorMsg = ref('')\r\nconst title = ref('')\r\nconst isRegister = ref(false)\r\nconst buttonText = ref('')\r\nconst finishMsg = ref('')\r\nconst codeType = ref('')\r\nconst route = useRoute()\r\ntitle.value = route.meta.title\r\nisRegister.value = title.value !== '重置密码'\r\nif (isRegister.value) {\r\n  buttonText.value = '立即注册'\r\n  finishMsg.value = '注册成功'\r\n  codeType.value = 'register'\r\n} else {\r\n  buttonText.value = '重置密码'\r\n  finishMsg.value = '重置成功'\r\n  codeType.value = 'resetPassword'\r\n}\r\n\r\nconst registerData = reactive({\r\n  userEmail: '',\r\n  password: '',\r\n  rePassword: '',\r\n  emailCode: '',\r\n  captcha: ''\r\n})\r\nconst buttonGetCode = reactive({\r\n  isCodeCD: false,\r\n  buttonText: '获取验证码'\r\n})\r\nconst rules = reactive({\r\n  userEmail: [\r\n    { required: true, message: '邮箱不能为空', trigger: 'blur' },\r\n    { validator: checkEmail, trigger: 'blur' }\r\n  ],\r\n  emailCode: [\r\n    { required: true, message: '验证码不能为空', trigger: 'blur' },\r\n    { min: 4, max: 4, message: '验证码格式为4位', trigger: 'blur' }\r\n  ],\r\n  password: [\r\n    { required: true, message: '密码不能为空', trigger: 'blur' },\r\n    { validator: checkPassword, trigger: 'blur' }\r\n  ],\r\n  rePassword: [\r\n    { required: true, message: '两次密码不一致', trigger: 'blur' },\r\n    { validator: checkRePassword, trigger: 'blur' }\r\n  ],\r\n  captcha: [\r\n    { required: true, message: '验证码不能为空', trigger: 'blur' },\r\n    { validator: checkCaptcha, trigger: 'blur' }\r\n  ]\r\n})\r\n\r\n//  处理获取邮箱验证码事件，负责触发验证函数，验证已填写数据的合法性，验证合法后调用获取邮箱验证码的函数\r\nfunction handleGetEmailCode(registerFrom, textGetCodeButton) {\r\n  buttonGetCode.isCodeCD = true\r\n  let codeCD = 60\r\n\r\n  textGetCodeButton.classList.toggle('text-getCode-button')\r\n  const countCD = setInterval(() => {\r\n    buttonGetCode.buttonText = `重新获取(${codeCD})`\r\n    codeCD -= 1\r\n    if (codeCD < 0) {\r\n      clearInterval(countCD)\r\n      buttonGetCode.isCodeCD = false\r\n      textGetCodeButton.classList.toggle('text-getCode-button')\r\n      buttonGetCode.buttonText = '重新获取验证码'\r\n    }\r\n  }, 900)\r\n\r\n  registerFrom.validateField(['userEmail', 'captcha'], isValid => {\r\n    if (isValid) {\r\n    //  验证通过\r\n\r\n      ElMessage({\r\n        type: 'success',\r\n        message: '验证码已发送'\r\n      })\r\n\r\n      getEmailCode({ userEmail: registerData.userEmail, type: codeType.value }).then(res => {\r\n        if (res.code === 200) {\r\n          console.log('send')\r\n        } else if (res.code === 300) {\r\n        //  邮箱已经注册\r\n          emailErrorMsg.value = '该邮箱已经注册账号'\r\n        } else if (res.code === 303) {\r\n          emailErrorMsg.value = '该邮箱未注册账号'\r\n        }\r\n      }, rej => {\r\n        console.log(rej)\r\n        ElMessage({\r\n          message: '网络错误，请稍后再试',\r\n          type: 'error'\r\n        })\r\n      })\r\n    }\r\n  })\r\n}\r\n//  负责验证图形验证码合法性的函数\r\nfunction checkCaptcha(rule, value, callback) {\r\n  if (value === captchaCode.value) {\r\n    return callback()\r\n  } else {\r\n    noMatchCode.value = !noMatchCode.value\r\n    return callback(new Error('请输入正确的验证码'))\r\n  }\r\n}\r\n//  负责验证邮箱合法性的函数\r\nfunction checkEmail(rule, value, callback) {\r\n  if (!(/^[^@]+@[^@]+$/.test(value))) {\r\n    return callback(new Error('请输入正确的邮箱'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n//  负责检查密码格式合法性\r\nfunction checkPassword(rule, value, callback) {\r\n//  密码规则：6-18位，包含字母和数字\r\n  if (value.length >= 6 && value.length <= 18) {\r\n    return callback()\r\n  }\r\n  return callback(new Error('密码需位6-18位包含字母或数字的字符串'))\r\n}\r\n// 验证重复密码\r\nfunction checkRePassword(rule, value, callback) {\r\n  if (value !== registerData.password) {\r\n    callback(new Error('两次密码不一致'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n//  负责处理获取图形验证码事件\r\nfunction handleGetCaptcha(code) {\r\n  captchaCode.value = code\r\n}\r\n//  负责处理注册事件\r\nfunction handleRegister(registerForm) {\r\n  registerForm.validate(isValid => {\r\n    if (isValid) {\r\n      register({ userEmail: registerData.userEmail, password: registerData.password, emailCode: registerData.emailCode }).then(res => {\r\n        if (res.code === 200) {\r\n        //  注册成功\r\n          ElMessage({\r\n            type: 'success',\r\n            message: finishMsg.value\r\n          })\r\n          const router = useRouter()\r\n          router.push('/login')\r\n        } else if (res.code === 400) {\r\n        //  邮箱已经存在\r\n          ElMessage({\r\n            type: 'error',\r\n            message: '该邮箱已经注册，请更换邮箱或直接登录！'\r\n          })\r\n          //  清空表单并重置验证码\r\n          registerForm.resetFields(['userEmail', 'emailCode', 'password', 'captcha', 'rePassword'])\r\n          noMatchCode.value = !noMatchCode.value\r\n        } else if (res.code === 500) {\r\n        //  验证码错误\r\n          ElMessage({\r\n            type: 'error',\r\n            message: '验证码错误！'\r\n          })\r\n          //  重置邮件验证码和图像验证码\r\n          registerForm.resetFields(['emailCode'])\r\n          noMatchCode.value = !noMatchCode.value\r\n        }\r\n      })\r\n    } else {\r\n    //  数据不合法\r\n    }\r\n  })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#content {\r\n  height: 100vh;\r\n}\r\n#body {\r\n  background-color: #ffffff;\r\n  border-radius: 5px;\r\n  box-shadow: 0 0 18px 3px #7e7e7e;\r\n  margin: 3em 20vw;\r\n}\r\n#body-header {\r\n  margin-left: 2%;\r\n  padding-top: 2%;\r\n}\r\n#body-header>a {\r\n  color: #8cc3fe;\r\n}\r\n#form-content>form {\r\n  text-align: center;\r\n  margin: 0 25%;\r\n  padding-top: 5%;\r\n}\r\n#form-title {\r\n  font-size: 1.5em;\r\n}\r\n#form-title~div {\r\n  margin-top: 1.2em;\r\n}\r\n#button-register {\r\n  color: white;\r\n  background-color: #409eff;\r\n  border-radius: 3px;\r\n  border: #409eff 1px solid;\r\n  width: 100%;\r\n  height: 3em;\r\n  text-align: center;\r\n  margin-left: 3%;\r\n  margin-top: 2em;\r\n  margin-bottom: 4em;\r\n}\r\n#text-getCode-button {\r\n  width: 6.2em;\r\n  color: #8cbeff;\r\n}\r\n#text-getCode-button.text-getCode-button {\r\n  color: #c4c4c4;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=be00d038&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\javaWeb\\\\vuePro\\\\xin_gong_ke\\\\iot-page\\\\node_modules\\\\.pnpm\\\\vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-be00d038\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=be00d038&scoped=true&lang=css\""],"sourceRoot":""}