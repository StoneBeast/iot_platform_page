{"version":3,"sources":["webpack:///./node_modules/.pnpm/toggle-selection@1.0.6/node_modules/toggle-selection/index.js","webpack:///./node_modules/.pnpm/copy-to-clipboard@3.3.2/node_modules/copy-to-clipboard/index.js","webpack:///./src/apis/device.js","webpack:///./src/views/device/component/deviceInfo.vue?5a39","webpack:///./src/views/deviceList/component/editDrawer.vue","webpack:///./src/views/deviceList/component/editDrawer.vue?f5ff","webpack:///./src/views/device/component/deviceInfo.vue","webpack:///./src/views/device/component/deviceInfo.vue?417e"],"names":["module","exports","selection","document","getSelection","rangeCount","active","activeElement","ranges","i","push","getRangeAt","tagName","toUpperCase","blur","removeAllRanges","type","forEach","range","addRange","focus","deselectCurrent","clipboardToIE11Formatting","defaultMessage","format","message","copyKey","test","navigator","userAgent","replace","copy","text","options","debug","reselectPrevious","mark","success","createRange","createElement","textContent","ariaHidden","style","all","position","top","clip","whiteSpace","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","addEventListener","e","stopPropagation","preventDefault","clipboardData","console","warn","window","clearData","setData","onCopy","body","appendChild","selectNodeContents","successful","execCommand","Error","err","error","prompt","removeRange","removeChild","addDevice","data","request","url","method","fetchDeviceList","params","fetchDeviceInfo","fetchDeviceStatus","deviceDataUploadInfo","deleteDevice","sendCommand","fetchCommandList","addApiKey","month","isShowDrawer","ref","deviceForm","watch","props","drawerSwitch","JSON","stringify","deviceEditData","deviceData","deviceName","deviceAuthentication","deviceIntroduction","deviceId","value","routerStore","useRouterStore","reactive","productId","rules","required","trigger","min","max","handleFetchDeviceList","emits","isButtonLoading","resetForm","form","resetFields","handleAddDevice","validate","isValid","then","res","code","ElMessage","finally","__exports__","isLoading","deviceInfo","createDate","deviceStatus","deviceAPI","apiKey","tagClass","computed","getDeviceInfo","handleEditDevice","handleCopiedInfo","infoText","deviceStatusTimer","getDeviceStatus","handleAddApiKey","onMounted","setInterval","onUnmounted","clearInterval"],"mappings":"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","file":"js/chunk-595de82e.b64ff495.js","sourcesContent":["\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"⌘\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // avoid screen readers from reading out loud the text\n    mark.ariaHidden = \"true\"\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","import request from '@/utils/axios'\r\n\r\nexport function addDevice(data) {\r\n  return request({\r\n    url: '/api/data/addDevice',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\n\r\nexport function fetchDeviceList(params) {\r\n  return request({\r\n    url: '/api/data/fetchDeviceList',\r\n    method: 'GET',\r\n    params\r\n  })\r\n}\r\n\r\nexport function fetchDeviceInfo(params) {\r\n  return request({\r\n    url: '/api/data/fetchDeviceInfo',\r\n    method: 'GET',\r\n    params\r\n  })\r\n}\r\n\r\nexport function fetchDeviceStatus(data) {\r\n  return request({\r\n    url: '/api/data/fetchDeviceStatus',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\n\r\nexport function deviceDataUploadInfo(params) {\r\n  return request({\r\n    url: '/api/data/deviceDataUploadInfo',\r\n    method: 'GET',\r\n    params\r\n  })\r\n}\r\n\r\nexport function deleteDevice(params) {\r\n  return request({\r\n    url: '/api/data/deleteDevice',\r\n    method: 'DELETE',\r\n    params\r\n  })\r\n}\r\n\r\nexport function sendCommand(data) {\r\n  return request({\r\n    url: '/api/data/sendCommand',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\n\r\nexport function fetchCommandList(params) {\r\n  return request({\r\n    url: '/api/data/fetchCommandList',\r\n    method: 'GET',\r\n    params\r\n  })\r\n}\r\n\r\nexport function addApiKey(params) {\r\n  return request({\r\n    url: '/api/data/addApiKey',\r\n    month: 'GET',\r\n    params\r\n  })\r\n}\r\n","export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/index.js??ref--1-1!./deviceInfo.vue?vue&type=style&index=0&id=04297d68&scoped=true&lang=css\"","<template>\r\n  <el-drawer v-model=\"isShowDrawer\">\r\n    <template #header>\r\n      <div>\r\n        <h2>{{ drawerTitle }}</h2>\r\n        <hr color=\"#e8eaec\">\r\n      </div>\r\n    </template>\r\n    <template #default>\r\n      <el-form ref=\"deviceForm\" :model=\"deviceData\" :rules=\"rules\" label-position=\"top\">\r\n        <el-form-item label=\"设备名称\" prop=\"deviceName\">\r\n          <el-input v-model=\"deviceData.deviceName\" placeholder=\"1-20个字符\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"鉴权信息\" prop=\"deviceAuthentication\">\r\n          <el-input v-model=\"deviceData.deviceAuthentication\" placeholder=\"6-24个字符\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"设备描述\" prop=\"deviceIntroduction\">\r\n          <el-input v-model=\"deviceData.deviceIntroduction\" placeholder=\"1-50个字符\" />\r\n        </el-form-item>\r\n      </el-form>\r\n    </template>\r\n    <template #footer>\r\n      <div style=\"flex: auto\">\r\n        <el-button @click=\"resetForm(deviceForm)\">取消</el-button>\r\n        <el-button type=\"primary\" :loading=\"isButtonLoading\" @click=\"handleAddDevice\">确定</el-button>\r\n      </div>\r\n    </template>\r\n  </el-drawer>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, watch, ref, reactive, defineEmits } from 'vue'\r\nimport { useRouterStore } from '@/store/router'\r\nimport { addDevice } from '@/apis/device'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nconst props = defineProps({\r\n  drawerSwitch: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  drawerTitle: {\r\n    type: String,\r\n    default: 'default_title'\r\n  },\r\n  deviceEditData: {\r\n    type: Object,\r\n    default() {\r\n      return {}\r\n    }\r\n  }\r\n})\r\nconst emits = defineEmits(['onUpdated'])\r\n\r\nconst isShowDrawer = ref(false)\r\nconst deviceForm = ref(null)\r\nconst message = ref('添加设备成功')\r\n\r\nwatch(\r\n  () => props.drawerSwitch,\r\n  () => {\r\n    //  当结果为true时，说明有传数据过来，也就是编辑设备信息\r\n    if (JSON.stringify(props.deviceEditData) !== '{}') {\r\n      deviceData.deviceName = props.deviceEditData.deviceName\r\n      deviceData.deviceAuthentication = props.deviceEditData.deviceAuthentication\r\n      deviceData.deviceIntroduction = props.deviceEditData.deviceIntroduction\r\n      deviceData.deviceId = props.deviceEditData.deviceId\r\n      message.value = '更新信息成功'\r\n    } else {\r\n      deviceData.deviceId = ''\r\n      deviceData.deviceName = ''\r\n      deviceData.deviceAuthentication = ''\r\n      deviceData.deviceIntroduction = ''\r\n      message.value = '添加设备成功'\r\n    }\r\n\r\n    isShowDrawer.value = true\r\n  }\r\n)\r\n\r\nconst routerStore = useRouterStore()\r\nconst deviceData = reactive({\r\n  productId: routerStore.productId,\r\n  deviceId: '',\r\n  deviceName: '',\r\n  deviceAuthentication: '',\r\n  deviceIntroduction: ''\r\n})\r\nconst rules = reactive({\r\n  deviceName: [\r\n    { required: true, message: '设备名不能为空', trigger: 'blur' },\r\n    { min: 1, max: 20, message: '长度须为1-20', trigger: 'blur' }\r\n  ],\r\n  deviceAuthentication: [\r\n    { required: true, message: '设备鉴权信息不能为空', trigger: 'blur' },\r\n    { min: 6, max: 24, message: '长度须为6-24', trigger: 'blur' }\r\n  ],\r\n  deviceIntroduction: [\r\n    { min: 0, max: 50, message: '长度不能超过50个字符', trigger: 'blur' }\r\n  ]\r\n})\r\n\r\nfunction handleFetchDeviceList() {\r\n  emits('onUpdated')\r\n}\r\n\r\nconst isButtonLoading = ref(false)\r\nfunction resetForm(form) {\r\n  isShowDrawer.value = false\r\n  isButtonLoading.value = false\r\n  form.resetFields()\r\n}\r\nfunction handleAddDevice() {\r\n  deviceForm.value.validate(isValid => {\r\n    if (isValid) {\r\n      isButtonLoading.value = true\r\n      addDevice(deviceData).then(res => {\r\n        if (res.code === 200) {\r\n          ElMessage({\r\n            type: 'success',\r\n            message: message.value\r\n          })\r\n          handleFetchDeviceList()\r\n          isShowDrawer.value = false\r\n        } else {\r\n          ElMessage({\r\n            type: 'error',\r\n            message: '未知错误'\r\n          })\r\n        }\r\n      }, () => {\r\n        ElMessage({\r\n          type: 'error',\r\n          message: '网络错误'\r\n        })\r\n      }).finally(() => {\r\n        isButtonLoading.value = false\r\n      })\r\n    }\r\n  })\r\n}\r\n</script>\r\n","import script from \"./editDrawer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./editDrawer.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div id=\"device-info-container\">\r\n    <div v-loading=\"isLoading\" class=\"context-container\">\r\n      <edit-drawer :drawer-switch=\"drawerSwitch\" :drawer-title=\"'编辑设备信息'\" :device-edit-data=\"deviceInfo\" @onUpdated=\"getDeviceInfo\" />\r\n      <div id=\"container-header\">\r\n        <span id=\"text-title-container-header\">{{ deviceInfo.deviceName }}</span>\r\n        <div id=\"tag-device-status\" :class=\"tagClass\">{{ deviceInfo.deviceStatus }}</div>\r\n        <el-button link type=\"primary\" @click=\"handleEditDevice\">编辑</el-button>\r\n      </div>\r\n      <div id=\"container-body\">\r\n        <ul style=\"list-style: none\">\r\n          <li>\r\n            <p class=\"text-title-info text-info-list\">设备ID</p>\r\n            <p class=\"text-value-info text-info-list\">{{ deviceInfo.deviceId }}</p>\r\n            <el-button link type=\"primary\" @click=\"handleCopiedInfo(deviceInfo.deviceId)\">复制</el-button>\r\n          </li>\r\n          <li>\r\n            <p class=\"text-title-info text-info-list\">设备名称</p>\r\n            <p class=\"text-value-info text-info-list\">{{ deviceInfo.deviceName }}</p>\r\n            <el-button link type=\"primary\" @click=\"handleCopiedInfo(deviceInfo.deviceName)\">复制</el-button>\r\n          </li>\r\n          <li>\r\n            <p class=\"text-title-info text-info-list\">鉴权信息</p>\r\n            <p class=\"text-value-info text-info-list\">{{ deviceInfo.deviceAuthentication }}</p>\r\n            <el-button link type=\"primary\" @click=\"handleCopiedInfo(deviceInfo.deviceAuthentication)\">复制</el-button>\r\n          </li>\r\n          <li>\r\n            <p class=\"text-title-info text-info-list\">API地址</p>\r\n            <p class=\"text-value-info text-info-list\">{{ deviceInfo.deviceAPI }}</p>\r\n            <el-button link type=\"primary\" @click=\"handleCopiedInfo(deviceInfo.deviceAPI)\">复制</el-button>\r\n          </li>\r\n          <li>\r\n            <p class=\"text-title-info text-info-list\">APIKey</p>\r\n            <p v-if=\"deviceInfo.apiKey\" class=\"text-value-info text-info-list\">{{ deviceInfo.apiKey }}</p>\r\n            <el-button v-if=\"deviceInfo.apiKey\" link type=\"primary\" @click=\"handleCopiedInfo(deviceInfo.apiKey)\">复制</el-button>\r\n            <el-button v-else link type=\"primary\" @click=\"handleAddApiKey\">添加ApiKey</el-button>\r\n          </li>\r\n          <li>\r\n            <p class=\"text-title-info text-info-list\">设备描述</p>\r\n            <p class=\"text-value-info text-info-list\">{{ deviceInfo.deviceIntroduction }}</p>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <div class=\"context-container\">\r\n      使用说明\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { fetchDeviceInfo, fetchDeviceStatus, addApiKey } from '@/apis/device'\r\nimport { reactive, ref, computed, onMounted, onUnmounted } from 'vue'\r\nimport { useRouterStore } from '@/store/router'\r\nimport { ElMessage } from 'element-plus'\r\nimport EditDrawer from '@/views/deviceList/component/editDrawer'\r\nimport copy from 'copy-to-clipboard'\r\n\r\nconst isLoading = ref(false)\r\nconst deviceInfo = reactive({\r\n  deviceId: '',\r\n  deviceName: '',\r\n  createDate: '',\r\n  deviceAuthentication: '',\r\n  deviceStatus: '',\r\n  deviceAPI: '',\r\n  apiKey: '',\r\n  deviceIntroduction: ''\r\n})\r\n\r\nconst routerStore = useRouterStore()\r\nconst tagClass = computed(() =>\r\n  deviceInfo.deviceStatus === '离线'\r\n    ? 'tag-offline-status'\r\n    : 'tag-online-status'\r\n)\r\nfunction getDeviceInfo() {\r\n  isLoading.value = true\r\n  fetchDeviceInfo({ productId: routerStore.productId, deviceId: routerStore.deviceId }).then(res => {\r\n    if (res.code === 200) {\r\n    //  请求成功并返回数据\r\n      deviceInfo.deviceId = res.data.deviceId\r\n      deviceInfo.deviceName = res.data.deviceName\r\n      deviceInfo.createDate = res.data.createDate\r\n      deviceInfo.deviceAuthentication = res.data.deviceAuthentication\r\n      deviceInfo.deviceStatus = res.data.deviceStatus\r\n      deviceInfo.deviceAPI = res.data.deviceAPI\r\n      deviceInfo.apiKey = res.data.apiKey\r\n      deviceInfo.deviceIntroduction = res.data.deviceIntroduction\r\n    } else {\r\n    //  其他错误,，预设错误\r\n      ElMessage({\r\n        type: 'error',\r\n        message: res.message\r\n      })\r\n    }\r\n  }, () => {\r\n    ElMessage({\r\n      type: 'error',\r\n      message: '网络错误'\r\n    })\r\n  }).finally(() => {\r\n    isLoading.value = false\r\n  })\r\n}\r\n\r\nconst drawerSwitch = ref(false)\r\nfunction handleEditDevice() {\r\n  drawerSwitch.value = !drawerSwitch.value\r\n}\r\n\r\ngetDeviceInfo()\r\n\r\nfunction handleCopiedInfo(infoText) {\r\n  copy(infoText)\r\n  ElMessage({\r\n    type: 'success',\r\n    message: '复制成功'\r\n  })\r\n}\r\nlet deviceStatusTimer\r\nonMounted(() => {\r\n  deviceStatusTimer = setInterval(getDeviceStatus, 8 * 1000)\r\n})\r\nonUnmounted(() => {\r\n  clearInterval(deviceStatusTimer)\r\n})\r\nfunction getDeviceStatus() {\r\n  fetchDeviceStatus({ productId: routerStore.productId, deviceId: [deviceInfo.deviceId] }).then(res => {\r\n    if (res.code === 200) {\r\n      deviceInfo.deviceStatus = res.data[0].deviceStatus\r\n    }\r\n  })\r\n}\r\nfunction handleAddApiKey() {\r\n  isLoading.value = true\r\n  addApiKey({ productId: routerStore.productId, deviceId: deviceInfo.deviceId }).then(res => {\r\n    if (res.code === 200) {\r\n      ElMessage({\r\n        type: 'success',\r\n        message: '添加成功'\r\n      })\r\n      deviceInfo.apiKey = res.data.apiKey\r\n    }\r\n  }, () => {\r\n    ElMessage({\r\n      type: 'error',\r\n      message: '网络错误'\r\n    })\r\n  }).finally(() => {\r\n    isLoading.value = false\r\n  })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.context-container {\r\n  background-color: white;\r\n  margin-top: 1em;\r\n  border-radius: 5px;\r\n  padding: 1em;\r\n}\r\n#container-header {\r\n  margin-bottom: 2em;\r\n}\r\n#text-title-container-header {\r\n  font-size: 2em;\r\n}\r\n#tag-device-status {\r\n  display: inline-block;\r\n  margin: 0 1em;\r\n  padding: 5px 2em;\r\n}\r\n.tag-online-status {\r\n  background-color: #f0f9eb;\r\n  border:1px solid #e1f3d8;\r\n  color: #67c23a;\r\n}\r\n.tag-offline-status {\r\n  background-color: #f4f4f5;\r\n  border:1px solid #e9e9eb;\r\n  color: #909399;\r\n}\r\nul{\r\n  padding-left: 0;\r\n  font-size: 0.8em;\r\n}\r\np.text-title-info {\r\n  width: 5em;\r\n}\r\n.text-info-list {\r\n  display: inline-block;\r\n  margin-bottom: 7px;\r\n}\r\n.text-value-info {\r\n  margin-right: 1em;\r\n}\r\n</style>\r\n","import script from \"./deviceInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./deviceInfo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./deviceInfo.vue?vue&type=style&index=0&id=04297d68&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\javaWeb\\\\vuePro\\\\xin_gong_ke\\\\iot-page\\\\node_modules\\\\.pnpm\\\\vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-04297d68\"]])\n\nexport default __exports__"],"sourceRoot":""}