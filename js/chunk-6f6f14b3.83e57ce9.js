(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f6f14b3"],{"32b3":function(e,t,a){"use strict";var c=a("3eb2");const r={id:"container-main-app-header"},l={id:"text-page-title"};var o={__name:"mainAppHeader",props:{pageTitle:{type:String,default:"temp"}},setup(e){const t=e;return(e,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",r,[Object(c["createElementVNode"])("span",l,Object(c["toDisplayString"])(t.pageTitle),1)]))}},n=(a("ce40"),a("6dd4")),d=a.n(n);const i=d()(o,[["__scopeId","data-v-4b858026"]]);t["a"]=i},"44fb":function(e,t,a){},5014:function(e,t,a){},"9fc3":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return d})),a.d(t,"e",(function(){return i}));var c=a("a27e");function r(e){return Object(c["a"])({url:"/api/data/fetchDataStream",method:"GET",params:e})}function l(e){return Object(c["a"])({url:"/api/data/fetchStreamData",method:"GET",params:e})}function o(e){return Object(c["a"])({url:"/api/data/fetchLatestData",method:"POST",data:e})}function n(e){return Object(c["a"])({url:"/api/data/addDataStream",method:"POST",data:e})}function d(e){return Object(c["a"])({url:"/api/data/deleteDataStream",method:"DELETE",params:e})}function i(e){return Object(c["a"])({url:"/api/data/fetchNewData",method:"GET",params:e})}},ce40:function(e,t,a){"use strict";a("44fb")},ed2a:function(e,t,a){"use strict";a("5014")},ffce:function(e,t,a){"use strict";a.r(t);var c=a("3eb2"),r=a("32b3"),l=a("815d"),o=a("9fc3"),n=a("5500");a("e097");const d={style:{flex:"auto"}},i=Object(c["createTextVNode"])("取消"),u=Object(c["createTextVNode"])("确认");var s={__name:"editDrawer",props:{drawerSwitch:{type:Boolean,default:!1},drawerTitle:{type:String,default:"default-title"},streamEditData:{type:Object,default(){return{}}}},emits:["addSuccess","close"],setup(e,{emit:t}){const a=e,r=Object(c["ref"])(null),n=Object(c["ref"])(!1),s=Object(l["a"])(),b=Object(c["reactive"])({dataName:"",unitSymbols:"",unitName:"",dataTemplateId:"",productId:s.productId}),m=Object(c["ref"])("default_title"),p=Object(c["ref"])(!1);Object(c["watch"])(()=>a.drawerSwitch,()=>{"{}"!==JSON.stringify(a.streamEditData)?(b.dataName=a.streamEditData.dataName,b.unitSymbols=a.streamEditData.unitSymbols,b.unitName=a.streamEditData.unitName,b.dataTemplateId=a.streamEditData.dataTemplateId,p.value=!0,m.value="编辑数据流"):(p.value=!1,j.value=!0,m.value="添加数据流",b.dataTemplateId="",b.dataName="",b.unitSymbols="",b.unitName="",b.dataTemplateId=""),n.value=!0});const O=Object(c["reactive"])({dataName:[{required:!0,message:"单位名称不能为空",trigger:"blur"},{max:20,message:"不能超过20个字符",trigger:"blur"},{validator:f,trigger:"blur"}],unitName:[{required:!0,message:"单位名称不能为空",trigger:"blur"},{max:20,message:"不能超过20个字符",trigger:"blur"}],unitSymbols:[{required:!0,message:"单位符号不能为空",trigger:"blur"},{max:20,message:"不能超过10个字符",trigger:"blur"}]}),j=Object(c["ref"])(!0);function f(e,t,a){j.value?/^\w+$/.test(t)?a():a(new Error("数据流名称只能使用字母、数字和'_'")):a(new Error("同一产品下存在相同的数据流名称"))}function v(){n.value=!1}const N=Object(c["ref"])(!1);function g(e){N.value=!0,e.validate(a=>{a?Object(o["a"])(b).then(a=>{200===a.code?(n.value=!1,t("addSuccess")):250===a.code&&(j.value=!1,e.validateField("dataName",e=>{e||(j.value=!0)}))},e=>{console.log(e)}).finally(()=>{N.value=!1}):N.value=!1})}function h(e){N.value=!1,e.resetFields(),t("close")}return(e,t)=>{const a=Object(c["resolveComponent"])("el-input"),l=Object(c["resolveComponent"])("el-form-item"),o=Object(c["resolveComponent"])("el-form"),s=Object(c["resolveComponent"])("el-button"),j=Object(c["resolveComponent"])("el-drawer");return Object(c["openBlock"])(),Object(c["createBlock"])(j,{modelValue:n.value,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value=e),direction:"rtl",onClose:t[5]||(t[5]=e=>h(r.value))},{header:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("h4",null,Object(c["toDisplayString"])(m.value),1)]),default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,{ref_key:"dataStreamFrom",ref:r,model:b,"label-position":"top",rules:O},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{label:"数据流名称",prop:"dataName"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,{modelValue:b.dataName,"onUpdate:modelValue":t[0]||(t[0]=e=>b.dataName=e),disabled:p.value,placeholder:"不超过20个字符，只能使用 字母、数字和_"},null,8,["modelValue","disabled"])]),_:1}),Object(c["createVNode"])(l,{label:"单位名称",prop:"unitName"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,{modelValue:b.unitName,"onUpdate:modelValue":t[1]||(t[1]=e=>b.unitName=e),placeholder:"请输入单位名称，不超过20个字符"},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(l,{label:"单位符号",prop:"unitSymbols"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,{modelValue:b.unitSymbols,"onUpdate:modelValue":t[2]||(t[2]=e=>b.unitSymbols=e),placeholder:"请输入单位符号，不超过20个字符"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),footer:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",d,[Object(c["createVNode"])(s,{onClick:v},{default:Object(c["withCtx"])(()=>[i]),_:1}),Object(c["createVNode"])(s,{type:"primary",loading:N.value,onClick:t[3]||(t[3]=e=>g(r.value))},{default:Object(c["withCtx"])(()=>[u]),_:1},8,["loading"])])]),_:1},8,["modelValue"])}}};const b=s;var m=b,p=a("3df8");const O=e=>(Object(c["pushScopeId"])("data-v-38ae52ea"),e=e(),Object(c["popScopeId"])(),e),j={id:"stream-container"},f={id:"header-container",class:"context-container"},v={id:"text-header"},N=O(()=>Object(c["createElementVNode"])("div",{id:"text-header-title",class:"text"},"数据流数量(个)",-1)),g={id:"text-header-value",class:"text"},h=O(()=>Object(c["createElementVNode"])("span",null,"添加数据流模板",-1)),V={id:"body-container",class:"context-container"},w=Object(c["createTextVNode"])("编辑"),C=Object(c["createTextVNode"])("删除"),E={id:"pagination"};var y={__name:"index",setup(e){Object(c["onMounted"])(()=>{b()});const t=Object(l["a"])(),a=Object(n["c"])(),d=Object(c["ref"])(a.meta.title),i=Object(c["ref"])(0),u=Object(c["reactive"])([]),s=Object(c["ref"])(!1);function b(e=1,a=8){s.value=!0,Object(o["c"])({productId:t.productId,page:e,pageSize:a}).then(e=>{200===e.code?(i.value=e.data.totalStream,u.splice(0),u.push(...e.data.streamList)):500===e.code&&Object(p["a"])({type:"error",message:e.message})}).finally(()=>{s.value=!1})}const O=Object(c["ref"])(!1),y=Object(c["ref"])("添加数据流");function x(){O.value=!O.value}function S(){let e;e=!1===D.isEdit?"添加成功":"修改成功",console.log(D.streamEditData),Object(p["a"])({type:"success",message:e}),b()}const D=Object(c["reactive"])({isEdit:!1,streamEditData:{}});function _(e){D.isEdit=!0,D.streamEditData.dataTemplateId=u[e].dataTemplateId,D.streamEditData.dataName=u[e].dataName,D.streamEditData.unitSymbols=u[e].unitSymbols,D.streamEditData.unitName=u[e].unitName,D.streamEditData.dataTemplateId=u[e].dataTemplateId,O.value=!O.value}function T(){D.isEdit=!1,D.streamEditData={}}function I(){console.log("cancel")}function k(e){Object(o["b"])({productId:t.productId,dataTemplateId:u[e].dataTemplateId}).then(e=>{200===e.code&&(Object(p["a"])({type:"success",message:"删除成功"}),b())},()=>{Object(p["a"])({type:"error",message:"网络错误"})})}return(e,t)=>{const a=Object(c["resolveComponent"])("ElementPlus"),l=Object(c["resolveComponent"])("el-icon"),o=Object(c["resolveComponent"])("el-button"),n=Object(c["resolveComponent"])("el-table-column"),p=Object(c["resolveComponent"])("el-popconfirm"),B=Object(c["resolveComponent"])("el-table"),z=Object(c["resolveComponent"])("el-pagination"),U=Object(c["resolveDirective"])("loading");return Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("div",j,[Object(c["createVNode"])(Object(c["unref"])(m),{"drawer-switch":O.value,"drawer-title":y.value,"stream-edit-data":D.streamEditData,onAddSuccess:S,onClose:T},null,8,["drawer-switch","drawer-title","stream-edit-data"]),Object(c["createVNode"])(Object(c["unref"])(r["a"]),{"page-title":d.value},null,8,["page-title"]),Object(c["createElementVNode"])("div",f,[Object(c["createElementVNode"])("div",v,[N,Object(c["createElementVNode"])("div",g,Object(c["toDisplayString"])(i.value),1)]),Object(c["createVNode"])(o,{type:"primary",onClick:x},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a)]),_:1}),h]),_:1})]),Object(c["createElementVNode"])("div",V,[Object(c["createVNode"])(B,{data:u,style:{width:"100%"}},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{prop:"dataTemplateId",label:"数据流ID"}),Object(c["createVNode"])(n,{prop:"dataName",label:"数据流名称"}),Object(c["createVNode"])(n,{prop:"unitName",label:"单位名称"}),Object(c["createVNode"])(n,{prop:"unitSymbols",label:"单位符号"}),Object(c["createVNode"])(n,{label:"操作"},{default:Object(c["withCtx"])(e=>[Object(c["createVNode"])(o,{link:"",type:"primary",size:"small",onClick:t=>_(e.$index)},{default:Object(c["withCtx"])(()=>[w]),_:2},1032,["onClick"]),Object(c["createVNode"])(p,{"confirm-button-type":"danger","confirm-button-text":"确认","cancel-button-text":"取消",title:"确认删除?",onConfirm:t=>k(e.$index),onCancel:I},{reference:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,{link:"",type:"primary",size:"small"},{default:Object(c["withCtx"])(()=>[C]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),Object(c["createElementVNode"])("div",E,[Object(c["createVNode"])(z,{background:"",layout:"prev, pager, next",total:i.value,"page-size":8,onCurrentChange:t[0]||(t[0]=e=>b(e,8))},null,8,["total"])])])])),[[U,s.value]])}}},x=(a("ed2a"),a("6dd4")),S=a.n(x);const D=S()(y,[["__scopeId","data-v-38ae52ea"]]);t["default"]=D}}]);
//# sourceMappingURL=chunk-6f6f14b3.83e57ce9.js.map