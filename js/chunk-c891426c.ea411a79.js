(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c891426c"],{1602:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return n})),a.d(t,"e",(function(){return d}));var r=a("a27e");function o(e){return Object(r["a"])({url:"/api/user/login",method:"POST",data:e})}function c(){return Object(r["a"])({url:"api/user/getUserInfo",method:"GET"})}function l(e){return Object(r["a"])({url:"/api/user/getEmailCode",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/api/user/emailLogin",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/api/user/register",method:"POST",data:e})}},2062:function(e,t,a){"use strict";var r=a("3eb2");function o(e,t){let a=!1;return function(){a||(a=!0,e.apply(this,arguments),setTimeout(()=>{a=!1},t))}}var c={__name:"captcha",props:{noMatchCode:{type:Boolean,default:!1}},emits:["getCaptcha"],setup(e,{emit:t}){const a=e,c=Object(r["ref"])(null),l=new Event("updateCaptcha");function n(e,t){const a=e.getContext("2d");a.save(),e.addEventListener("updateCaptcha",()=>d(a,t)),d(a,t)}function d(e,a){e.restore(),e.restore(),e.clearRect(0,0,80,30),e.save();let r="";e.font="bold 15px serif",e.textBaseline="top",e.translate(10,5),e.save();let o=0;while(o<a){const t=u(9,0);r=r+""+t,e.restore(),e.save(),e.fillStyle=s(),e.translate(o*u(20,15),0),e.rotate(i(40)*Math.PI/180),e.fillText(t,0,0),o++}t("getCaptcha",r)}function u(e=1,t=0){return Math.floor(Math.random()*(e-t))+t}function s(){return`rgb(${u(255)}, ${u(255)}, ${u(255)})`}function i(e,t=0){return 0===t?Math.random()>=.5?i(e,1):i(e,-1):t<0?-u(e):u(e)}return Object(r["onMounted"])(()=>{c.value.addEventListener("click",o(()=>c.value.dispatchEvent(l),500)),n(c.value,4),Object(r["watch"])(()=>a.noMatchCode,()=>{c.value.dispatchEvent(l)})}),(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("canvas",{ref_key:"canvas",ref:c,width:"80",height:"30"},null,512))}};const l=c;t["a"]=l},"307c":function(e,t,a){"use strict";a("f059")},"34e1":function(e,t,a){"use strict";var r=a("3eb2"),o=a("5500");const c={id:"header"},l={id:"back-icon"},n={id:"avatar",class:"slot"};var d={__name:"layoutHeader",setup(e){const t=Object(o["d"])();function a(){t.push({name:"login"})}return(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",c,[Object(r["createElementVNode"])("div",l,[Object(r["renderSlot"])(e.$slots,"backIcon")]),Object(r["createElementVNode"])("div",{id:"icon-logo",class:"slot"},[Object(r["createElementVNode"])("img",{src:"https://img1.imgtp.com/2022/10/15/TP8TMu93.png",alt:"logo",height:"48",width:"78",onClick:a})]),Object(r["createElementVNode"])("div",n,[Object(r["renderSlot"])(e.$slots,"avatar")])]))}},u=(a("307c"),a("6dd4")),s=a.n(u);const i=s()(d,[["__scopeId","data-v-89c18978"]]);t["a"]=i},d5c2:function(e,t,a){"use strict";a.r(t);a("e097");var r=a("3eb2"),o=a("34e1"),c=a("2062"),l=a("1602"),n=a("3df8"),d=a("5500");const u={id:"content"},s={id:"body"},i={id:"body-header"},b=Object(r["createTextVNode"])("已有账号？去登录"),p={id:"form-content"},m={id:"form-title"};var O={__name:"index",setup(e){const t=Object(r["ref"])(null),a=Object(r["ref"])(null),O=Object(r["ref"])(!1),j=Object(r["ref"])(""),f=Object(r["ref"])(""),v=Object(r["ref"])(""),g=Object(r["ref"])(!1),h=Object(r["ref"])(""),C=Object(r["ref"])(""),w=Object(r["ref"])(""),V=Object(d["c"])();v.value=V.meta.title,g.value="重置密码"!==v.value,g.value?(h.value="立即注册",C.value="注册成功",w.value="register"):(h.value="重置密码",C.value="重置成功",w.value="resetPassword");const E=Object(r["reactive"])({userEmail:"",password:"",rePassword:"",emailCode:"",captcha:""}),N=Object(r["reactive"])({isCodeCD:!1,buttonText:"获取验证码"}),x=Object(r["reactive"])({userEmail:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{validator:k,trigger:"blur"}],emailCode:[{required:!0,message:"验证码不能为空",trigger:"blur"},{min:4,max:4,message:"验证码格式为4位",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{validator:T,trigger:"blur"}],rePassword:[{required:!0,message:"两次密码不一致",trigger:"blur"},{validator:P,trigger:"blur"}],captcha:[{required:!0,message:"验证码不能为空",trigger:"blur"},{validator:y,trigger:"blur"}]});function _(e,t){N.isCodeCD=!0;let a=60;t.classList.toggle("text-getCode-button");const r=setInterval(()=>{N.buttonText=`重新获取(${a})`,a-=1,a<0&&(clearInterval(r),N.isCodeCD=!1,t.classList.toggle("text-getCode-button"),N.buttonText="重新获取验证码")},900);e.validateField(["userEmail","captcha"],e=>{e&&(Object(n["a"])({type:"success",message:"验证码已发送"}),Object(l["b"])({userEmail:E.userEmail,type:w.value}).then(e=>{200===e.code?console.log("send"):300===e.code?f.value="该邮箱已经注册账号":303===e.code&&(f.value="该邮箱未注册账号")},e=>{console.log(e),Object(n["a"])({message:"网络错误，请稍后再试",type:"error"})}))})}function y(e,t,a){return t===j.value?a():(O.value=!O.value,a(new Error("请输入正确的验证码")))}function k(e,t,a){if(!/^[^@]+@[^@]+$/.test(t))return a(new Error("请输入正确的邮箱"));a()}function T(e,t,a){return t.length>=6&&t.length<=18?a():a(new Error("密码需位6-18位包含字母或数字的字符串"))}function P(e,t,a){t!==E.password?a(new Error("两次密码不一致")):a()}function B(e){j.value=e}function M(e){e.validate(t=>{t&&Object(l["e"])({userEmail:E.userEmail,password:E.password,emailCode:E.emailCode}).then(t=>{if(200===t.code){Object(n["a"])({type:"success",message:C.value});const e=Object(d["d"])();e.push("/login")}else 400===t.code?(Object(n["a"])({type:"error",message:"该邮箱已经注册，请更换邮箱或直接登录！"}),e.resetFields(["userEmail","emailCode","password","captcha","rePassword"]),O.value=!O.value):500===t.code&&(Object(n["a"])({type:"error",message:"验证码错误！"}),e.resetFields(["emailCode"]),O.value=!O.value)})})}return(e,l)=>{const n=Object(r["resolveComponent"])("router-link"),d=Object(r["resolveComponent"])("el-input"),j=Object(r["resolveComponent"])("el-form-item"),g=Object(r["resolveComponent"])("el-button"),C=Object(r["resolveComponent"])("el-form");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",u,[Object(r["createVNode"])(Object(r["unref"])(o["a"])),Object(r["createElementVNode"])("div",s,[Object(r["createElementVNode"])("div",i,[Object(r["createVNode"])(n,{to:"login"},{default:Object(r["withCtx"])(()=>[b]),_:1})]),Object(r["createElementVNode"])("div",p,[Object(r["createVNode"])(C,{ref_key:"registerFrom",ref:t,model:E,rules:x,"label-width":"auto","label-position":"left"},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("span",m,Object(r["toDisplayString"])(v.value),1),Object(r["createVNode"])(j,{label:"邮箱地址",error:f.value,prop:"userEmail"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(d,{modelValue:E.userEmail,"onUpdate:modelValue":l[0]||(l[0]=e=>E.userEmail=e)},null,8,["modelValue"])]),_:1},8,["error"]),Object(r["createVNode"])(j,{label:"图形验证码",prop:"captcha"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(d,{modelValue:E.captcha,"onUpdate:modelValue":l[1]||(l[1]=e=>E.captcha=e)},{append:Object(r["withCtx"])(()=>[Object(r["createVNode"])(Object(r["unref"])(c["a"]),{"no-match-code":O.value,onGetCaptcha:B},null,8,["no-match-code"])]),_:1},8,["modelValue"])]),_:1}),Object(r["createVNode"])(j,{label:"邮箱验证码",prop:"emailCode"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(d,{modelValue:E.emailCode,"onUpdate:modelValue":l[3]||(l[3]=e=>E.emailCode=e)},{append:Object(r["withCtx"])(()=>[Object(r["createVNode"])(g,{type:"primary",disabled:N.isCodeCD,onClick:l[2]||(l[2]=e=>_(t.value,a.value))},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("span",{id:"text-getCode-button",ref_key:"textGetCodeButton",ref:a},Object(r["toDisplayString"])(N.buttonText),513)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),Object(r["createVNode"])(j,{label:"设置密码",prop:"password"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(d,{modelValue:E.password,"onUpdate:modelValue":l[4]||(l[4]=e=>E.password=e),type:"password"},null,8,["modelValue"])]),_:1}),Object(r["createVNode"])(j,{label:"重复密码",prop:"rePassword"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(d,{modelValue:E.rePassword,"onUpdate:modelValue":l[5]||(l[5]=e=>E.rePassword=e),type:"password"},null,8,["modelValue"])]),_:1}),Object(r["createElementVNode"])("button",{id:"button-register",onClick:l[6]||(l[6]=e=>M(t.value))},[Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(h.value),1)])]),_:1},8,["model","rules"])])])])}}},j=(a("d699"),a("6dd4")),f=a.n(j);const v=f()(O,[["__scopeId","data-v-be00d038"]]);t["default"]=v},d699:function(e,t,a){"use strict";a("f772")},f059:function(e,t,a){},f772:function(e,t,a){}}]);
//# sourceMappingURL=chunk-c891426c.ea411a79.js.map