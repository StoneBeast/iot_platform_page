(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-827ae396"],{"2c28":function(e,t,c){"use strict";c.d(t,"f",(function(){return o})),c.d(t,"a",(function(){return n})),c.d(t,"b",(function(){return r})),c.d(t,"e",(function(){return l})),c.d(t,"d",(function(){return d})),c.d(t,"c",(function(){return i})),c.d(t,"g",(function(){return s}));var a=c("a27e");function o(e){return Object(a["a"])({url:"/api/data/fetchProductList",method:"GET",params:e})}function n(e){return Object(a["a"])({url:"/api/data/addUpdateProduct",method:"POST",data:e})}function r(e){return Object(a["a"])({url:"/api/data/deleteProduct",method:"DELETE",params:e})}function l(e){return Object(a["a"])({url:"/api/data/fetchProductData",method:"GET",params:e})}function d(){return Object(a["a"])({url:"/api/data/fetchEditOptions",method:"GET"})}function i(e){return Object(a["a"])({url:"/api/data/fetchConnectedDevice",method:"GET",params:e})}function s(e){return Object(a["a"])({url:"/api/data/fetchUploadDeviceCount",method:"GET",params:e})}},"32b3":function(e,t,c){"use strict";var a=c("3eb2");const o={id:"container-main-app-header"},n={id:"text-page-title"};var r={__name:"mainAppHeader",props:{pageTitle:{type:String,default:"temp"}},setup(e){const t=e;return(e,c)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("span",n,Object(a["toDisplayString"])(t.pageTitle),1)]))}},l=(c("ce40"),c("6dd4")),d=c.n(l);const i=d()(r,[["__scopeId","data-v-4b858026"]]);t["a"]=i},"44fb":function(e,t,c){},5090:function(e,t,c){"use strict";c("8c6a")},"8c6a":function(e,t,c){},"8e8b":function(e,t,c){},ce40:function(e,t,c){"use strict";c("44fb")},d2a3:function(e,t,c){"use strict";c("8e8b")},e6e2:function(e,t,c){"use strict";c.r(t);var a=c("3eb2"),o=c("32b3"),n=c("7b7b"),r=c("2c28"),l=c("815d"),d=c("2095"),i={__name:"lineChart",props:{chartTitle:{type:String,default:"设备接入统计"}},setup(e){const t=e,c=Object(l["a"])(),o=Object(a["ref"])(!1),i=Date.now()-6048e5,s=Date.now(),u=Object(a["reactive"])({start:i,end:s,productId:c.productId}),b=Object(a["ref"])(null);let p;function O(e){o.value=!0;const t={title:{text:"设备接入统计"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},animation:!0,xAxis:{type:"category",boundaryGap:!1,name:"时间",data:[],nameTextStyle:{fontStyle:"italic",fontWeight:"bold",fontSize:15},axisLine:{symbol:["none","arrow"]}},yAxis:{type:"value",name:"数量(个)",nameTextStyle:{fontStyle:"italic",fontWeight:"bold",fontSize:15},axisLine:{show:!0,symbol:["none","arrow"]}},series:[{data:[],name:"新接入设备数",type:"line",symbolSize:10,lineStyle:{width:6},smooth:!0}]};Object(r["c"])(u).then(c=>{t.xAxis.data=c.data.map(e=>Object(d["a"])(e.date,"YY-MM-DD")),t.series[0].data=c.data.map(e=>e.newCount),e.setOption(t),o.value=!1})}function j(e,t){o.value=!0;const c={title:{text:e},xAxis:{data:[]},series:[{name:"",data:[]}]};"设备接入统计"===e?Object(r["c"])(u).then(e=>{c.xAxis.data=e.data.map(e=>Object(d["a"])(e.date)),c.series[0].data=e.data.map(e=>e.newCount),c.series[0].name="新接入设备数",t.setOption(c),o.value=!1}):Object(r["g"])(u).then(e=>{c.xAxis.data=e.data.datalist.map(e=>Object(d["a"])(e.date)),c.series[0].data=e.data.datalist.map(e=>e.newCount),c.series[0].name="新上传数据数",t.setOption(c),o.value=!1})}return Object(a["onMounted"])(()=>{p=n["a"].init(b.value),O(p)}),Object(a["watch"])(()=>t.chartTitle,()=>{j(t.chartTitle,p)}),(e,t)=>{const c=Object(a["resolveDirective"])("loading");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{id:"container-box-chart",ref_key:"chart",ref:b},null,512)),[[c,o.value]])}}},s=(c("5090"),c("6dd4")),u=c.n(s);const b=u()(i,[["__scopeId","data-v-666f9aa3"]]);var p=b,O=c("3df8");const j=Object(a["createElementVNode"])("hr",{color:"#e8eaec"},null,-1),m=Object(a["createElementVNode"])("h3",null,"产品信息",-1),f=Object(a["createElementVNode"])("hr",{color:"#e8eaec"},null,-1),v=Object(a["createElementVNode"])("h3",null,"技术参数",-1),V={style:{flex:"auto"}},N=Object(a["createTextVNode"])("取消"),h=Object(a["createTextVNode"])("确认");var w={__name:"productInfoDrawer",props:{productId:{type:String,default:""},isBrowse:{type:Boolean,default:!1},drawerSwitch:{type:Boolean,default:!0}},emits:["updateInfo"],setup(e,{emit:t}){const c=e,o=Object(l["a"])(),n=Object(a["computed"])(()=>c.isBrowse?"产品信息":"编辑信息"),d=Object(a["ref"])(!1);function i(){Object(r["e"])({productId:o.productId}).then(e=>{s.productId=e.data.productId,s.productName=e.data.productName,s.productIndustry=e.data.productIndustry,s.productType=e.data.productType,s.productAbout=e.data.productAbout,s.accessNetworks=e.data.accessNetworks,s.accessAgreement=e.data.accessAgreement,d.value=!0})}Object(a["watch"])(()=>c.drawerSwitch,()=>{i()});const s=Object(a["reactive"])({productId:"",productName:"",productIndustry:"",productType:"",productAbout:"",accessNetworks:"",accessAgreement:""}),u=Object(a["reactive"])({industryOptions:[],productTypeOptions:[],accessAgreementOptions:[]});Object(a["onMounted"])(()=>{Object(r["d"])().then(e=>{u.industryOptions=e.data.industryOptions,u.productTypeOptions=e.data.productTypeOptions,u.accessAgreementOptions=e.data.accessAgreementOptions})});const b=Object(a["reactive"])({productName:[{required:!0,message:"产品名称不能为空",trigger:"blur"},{min:2,max:15,message:"长度为2-15个字符",trigger:"blur"}],productIndustry:[{required:!0,message:"产品行业不能为空",trigger:"blur"}],productType:[{required:!0,message:"产品类别不能为空",trigger:"blur"}],accessNetworks:[{required:!0,message:"联网方式不能为空",trigger:"blur"}],accessAgreement:[{required:!0,message:"设备接入协议不能为空",trigger:"blur"}]});function p(){d.value=!1}const w=Object(a["ref"])(!1);function x(){c.isBrowse?d.value=!1:(w.value=!0,Object(r["a"])(s).then(e=>{200===e.code&&(Object(O["a"])({type:"success",message:"修改成功"}),t("updateInfo"),d.value=!1),w.value=!1}))}return(e,t)=>{const o=Object(a["resolveComponent"])("el-input"),r=Object(a["resolveComponent"])("el-form-item"),l=Object(a["resolveComponent"])("el-option"),i=Object(a["resolveComponent"])("el-select"),O=Object(a["resolveComponent"])("el-radio"),g=Object(a["resolveComponent"])("el-radio-group"),y=Object(a["resolveComponent"])("el-form"),C=Object(a["resolveComponent"])("el-button"),E=Object(a["resolveComponent"])("el-drawer");return Object(a["openBlock"])(),Object(a["createBlock"])(E,{modelValue:d.value,"onUpdate:modelValue":t[6]||(t[6]=e=>d.value=e),direction:"rtl"},{header:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("h2",null,Object(a["toDisplayString"])(Object(a["unref"])(n)),1),j])]),default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",null,[m,Object(a["createVNode"])(y,{ref:"createFrom",model:s,"label-position":"top",rules:b},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{label:"产品名称",prop:"productName"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(o,{modelValue:s.productName,"onUpdate:modelValue":t[0]||(t[0]=e=>s.productName=e),placeholder:"请输入产品名称",disabled:c.isBrowse},null,8,["modelValue","disabled"])]),_:1}),Object(a["createVNode"])(r,{label:"产品行业",prop:"productIndustry"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{modelValue:s.productIndustry,"onUpdate:modelValue":t[1]||(t[1]=e=>s.productIndustry=e),placeholder:"选择产品行业",disabled:c.isBrowse},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(u.industryOptions,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:t,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),Object(a["createVNode"])(r,{label:"产品类别",prop:"productType"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{modelValue:s.productType,"onUpdate:modelValue":t[2]||(t[2]=e=>s.productType=e),placeholder:"选择产品类别",disabled:c.isBrowse},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(u.productTypeOptions,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:t,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),Object(a["createVNode"])(r,{label:"产品简介:",prop:"productAbout"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(o,{modelValue:s.productAbout,"onUpdate:modelValue":t[3]||(t[3]=e=>s.productAbout=e),type:"textarea",placeholder:"产品简介",autosize:{minRows:5,maxRows:7},disabled:c.isBrowse},null,8,["modelValue","disabled"])]),_:1}),f,v,Object(a["createVNode"])(r,{label:"联网方式:",prop:"accessNetworks"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(g,{modelValue:s.accessNetworks,"onUpdate:modelValue":t[4]||(t[4]=e=>s.accessNetworks=e),disabled:c.isBrowse},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(O,{label:"蜂窝网络"}),Object(a["createVNode"])(O,{label:"wifi"})]),_:1},8,["modelValue","disabled"])]),_:1}),Object(a["createVNode"])(r,{label:"设备接入协议",prop:"accessAgreement"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{modelValue:s.accessAgreement,"onUpdate:modelValue":t[5]||(t[5]=e=>s.accessAgreement=e),placeholder:"选择接入协议",disabled:c.isBrowse},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(u.accessAgreementOptions,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(l,{key:t,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1},8,["model","rules"])])]),footer:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("div",V,[Object(a["createVNode"])(C,{onClick:p},{default:Object(a["withCtx"])(()=>[N]),_:1}),Object(a["createVNode"])(C,{type:"primary",loading:w.value,onClick:x},{default:Object(a["withCtx"])(()=>[h]),_:1},8,["loading"])])]),_:1},8,["modelValue"])}}};const x=w;var g=x,y=c("7b4b");const C=e=>(Object(a["pushScopeId"])("data-v-173d6202"),e=e(),Object(a["popScopeId"])(),e),E={id:"container-product"},_={id:"container-product-info",class:"container-context"},T=Object(a["createTextVNode"])("产品ID"),k=Object(a["createTextVNode"])("占位"),I=Object(a["createTextVNode"])("占位"),B=Object(a["createTextVNode"])("接入协议"),D=Object(a["createTextVNode"])("temp"),S=Object(a["createTextVNode"])("temp"),A={id:"container-option"},L={class:"container-info-device-left"},U=C(()=>Object(a["createElementVNode"])("div",{class:"iconfont icon-device"},null,-1)),G=C(()=>Object(a["createElementVNode"])("span",null,"接入设备总数",-1)),P=C(()=>Object(a["createElementVNode"])("br",null,null,-1)),q={class:"container-info-device-right-top"},M=C(()=>Object(a["createElementVNode"])("span",null,"当前在线设备",-1)),z=C(()=>Object(a["createElementVNode"])("br",null,null,-1)),F={class:"container-info-device-right-bottom"},J=C(()=>Object(a["createElementVNode"])("span",null,"今日新增设备",-1)),R=C(()=>Object(a["createElementVNode"])("br",null,null,-1)),W={class:"container-info-device-left"},Y=C(()=>Object(a["createElementVNode"])("div",{class:"iconfont icon-data-device"},null,-1)),H=C(()=>Object(a["createElementVNode"])("span",null,"上传数据总数",-1)),K=C(()=>Object(a["createElementVNode"])("br",null,null,-1)),Q={class:"container-info-device-right-top"},X=C(()=>Object(a["createElementVNode"])("span",null,"今日上传数据数",-1)),Z=C(()=>Object(a["createElementVNode"])("br",null,null,-1)),$={class:"container-info-device-right-bottom"},ee=C(()=>Object(a["createElementVNode"])("span",null,"今日上传数据设备",-1)),te=C(()=>Object(a["createElementVNode"])("br",null,null,-1)),ce={id:"container-chart",class:"container-context"};var ae={__name:"index",setup(e){const t=Object(a["ref"])(!1),c=Object(a["reactive"])({productName:"",productId:"",productType:"",accessAgreement:"",deviceCount:""}),n=Date.now()-6048e5,d=Date.now(),i=Object(l["a"])(),s=Object(a["reactive"])({start:n,end:d,productId:i.productId}),u=Object(a["ref"])(0),b=Object(a["ref"])(0),O=Object(a["ref"])(0),j=Object(a["ref"])(0),m=Object(a["ref"])(0);function f(){Object(r["c"])(s).then(e=>{200===e.code&&(u.value=e.data[7].newCount)}),Object(y["h"])({productId:i.productId,deviceId:["*"]}).then(e=>{200===e.code&&(b.value=0,e.data.forEach(e=>{"在线"===e.deviceStatus&&(b.value+=1)}))}),Object(r["g"])(s).then(e=>{200===e.code&&(O.value=e.data.todayUploadDevice,j.value=e.data.datalist[7].newCount,m.value=e.data.datalist[0].totalCount)})}function v(){h(),oe.value.classList.contains("tag-active")||oe.value.classList.add("tag-active"),f()}let V;function N(){f(),V=setTimeout(N,1e4)}function h(){t.value=!0,Object(r["e"])({productId:i.productId}).then(e=>{c.productName=e.data.productName,c.productId=e.data.productId,c.productType=e.data.productType,c.accessAgreement=e.data.accessAgreement,c.deviceCount=e.data.deviceCount}).finally(()=>{t.value=!1})}Object(a["onMounted"])(()=>{v(),N()}),Object(a["onUnmounted"])(()=>{clearTimeout(V)});const w=Object(a["ref"])(!0);function x(){w.value=!0,C.value=!C.value}const C=Object(a["ref"])(!0);function ae(){w.value=!1,C.value=!C.value}const oe=Object(a["ref"])(null),ne=Object(a["ref"])(null),re=Object(a["ref"])("设备接入统计");function le(e,t,c){re.value=c,e.classList.contains("tag-active")||e.classList.add("tag-active"),t.classList.contains("tag-active")&&t.classList.remove("tag-active")}return(e,n)=>{const r=Object(a["resolveComponent"])("el-col"),l=Object(a["resolveComponent"])("el-row"),d=Object(a["resolveComponent"])("el-tag"),i=Object(a["resolveDirective"])("loading");return Object(a["withDirectives"])((Object(a["openBlock"])(),Object(a["createElementBlock"])("div",E,[Object(a["createVNode"])(Object(a["unref"])(g),{"drawer-switch":C.value,"is-browse":w.value,onUpdateInfo:h},null,8,["drawer-switch","is-browse"]),Object(a["createVNode"])(Object(a["unref"])(o["a"]),{"page-title":"产品详情"}),Object(a["createElementVNode"])("div",_,[Object(a["createVNode"])(l,{justify:"center"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{class:"text-container-title text-container-first",span:12},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.productName),1)]),_:1}),Object(a["createVNode"])(r,{class:"text-container-title",span:3},{default:Object(a["withCtx"])(()=>[T]),_:1}),Object(a["createVNode"])(r,{class:"text-container-title",span:3},{default:Object(a["withCtx"])(()=>[k]),_:1}),Object(a["createVNode"])(r,{class:"text-container-title",span:3},{default:Object(a["withCtx"])(()=>[I]),_:1}),Object(a["createVNode"])(r,{class:"text-container-title",span:3},{default:Object(a["withCtx"])(()=>[B]),_:1})]),_:1}),Object(a["createVNode"])(l,{justify:"center"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(r,{class:"text-container-content text-container-first",span:12},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.productType),1)]),_:1}),Object(a["createElementVNode"])("span",{style:{cursor:"pointer"},onClick:x},"详情"),Object(a["createElementVNode"])("span",{style:{cursor:"pointer"},onClick:ae},"编辑")]),_:1}),Object(a["createVNode"])(r,{class:"text-container-content",span:3},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.productId),1)]),_:1}),Object(a["createVNode"])(r,{class:"text-container-content",span:3},{default:Object(a["withCtx"])(()=>[D]),_:1}),Object(a["createVNode"])(r,{class:"text-container-content",span:3},{default:Object(a["withCtx"])(()=>[S]),_:1}),Object(a["createVNode"])(r,{class:"text-container-content",span:3},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.accessAgreement),1)]),_:1})]),_:1})]),Object(a["createElementVNode"])("div",A,[Object(a["createElementVNode"])("div",{id:"container-connect-device",ref_key:"deviceConnect",ref:oe,class:"container-info-device container-context",onClick:n[0]||(n[0]=e=>le(oe.value,ne.value,"设备接入统计"))},[Object(a["createElementVNode"])("div",L,[U,G,P,Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(c.deviceCount),1)]),Object(a["createElementVNode"])("div",q,[M,z,Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(b.value),1)]),Object(a["createElementVNode"])("div",F,[J,R,Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(u.value),1)])],512),Object(a["createElementVNode"])("div",{id:"container-data-device",ref_key:"deviceData",ref:ne,class:"container-info-device container-context",onClick:n[1]||(n[1]=e=>le(ne.value,oe.value,"上传数据统计"))},[Object(a["createElementVNode"])("div",W,[Y,H,K,Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(m.value),1)]),Object(a["createElementVNode"])("div",Q,[X,Z,Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(j.value),1)]),Object(a["createElementVNode"])("div",$,[ee,te,Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(O.value),1)])],512)]),Object(a["createElementVNode"])("div",ce,[Object(a["createVNode"])(Object(a["unref"])(p),{"chart-title":re.value},null,8,["chart-title"])])])),[[i,t.value]])}}};c("d2a3");const oe=u()(ae,[["__scopeId","data-v-173d6202"]]);t["default"]=oe}}]);
//# sourceMappingURL=chunk-827ae396.f1787c57.js.map