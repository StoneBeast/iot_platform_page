(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dd47f34"],{"1b06":function(e,t,a){"use strict";a("9737")},2095:function(e,t,a){"use strict";function c(e,t="YY-MM-DD hh:mm:ss"){const a=new Date(e),c=a.getFullYear(),o=a.getMonth()+1,n=a.getDate(),d=a.getHours(),r=a.getMinutes(),l=a.getSeconds(),m=Array.apply(null,Array(10)).map((function(e,t){return"0"+t}));return t.replace(/YY/g,c).replace(/MM/g,m[o]||o).replace(/DD/g,m[n]||n).replace(/hh/g,m[d]||d).replace(/mm/g,m[r]||r).replace(/ss/g,m[l]||l)}a.d(t,"a",(function(){return c}))},"7b4b":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"g",(function(){return n})),a.d(t,"f",(function(){return d})),a.d(t,"h",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return m})),a.d(t,"i",(function(){return i})),a.d(t,"e",(function(){return u})),a.d(t,"a",(function(){return b}));var c=a("a27e");function o(e){return Object(c["a"])({url:"/api/data/addDevice",method:"POST",data:e})}function n(e){return Object(c["a"])({url:"/api/data/fetchDeviceList",method:"GET",params:e})}function d(e){return Object(c["a"])({url:"/api/data/fetchDeviceInfo",method:"GET",params:e})}function r(e){return Object(c["a"])({url:"/api/data/fetchDeviceStatus",method:"POST",data:e})}function l(e){return Object(c["a"])({url:"/api/data/deviceDataUploadInfo",method:"GET",params:e})}function m(e){return Object(c["a"])({url:"/api/data/deleteDevice",method:"DELETE",params:e})}function i(e){return Object(c["a"])({url:"/api/data/sendCommand",method:"POST",data:e})}function u(e){return Object(c["a"])({url:"/api/data/fetchCommandList",method:"GET",params:e})}function b(e){return Object(c["a"])({url:"/api/data/addApiKey",month:"GET",params:e})}},9737:function(e,t,a){},df63:function(e,t,a){"use strict";a.r(t);a("e097");var c=a("3eb2"),o=a("7b4b"),n=a("815d"),d=a("3df8"),r=a("2095");const l=e=>(Object(c["pushScopeId"])("data-v-f39812ac"),e=e(),Object(c["popScopeId"])(),e),m={id:"container-command"},i={id:"drawer-command"},u=l(()=>Object(c["createElementVNode"])("h4",null,"下发命令",-1)),b={id:"container-send-command"},p=Object(c["createTextVNode"])("字符串"),s=Object(c["createTextVNode"])("数字"),O={style:{flex:"auto"}},j=Object(c["createTextVNode"])("取消"),f=Object(c["createTextVNode"])("确定"),v={id:"header-command",class:"context-container"},h={id:"table-command-count"},V=l(()=>Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("span",{id:"text-command-table-title"},"命令数量")])],-1)),g={id:"text-command-table-count"},x={id:"button-command"},N=Object(c["createTextVNode"])("下发指令"),T={id:"body-command",class:"context-container"},y={id:"footer-command"};var w={__name:"command",setup(e){const t=Object(c["ref"])(!1),a=Object(c["ref"])(null),l=Object(n["a"])(),w=Object(c["ref"])(!1),C=Object(c["reactive"])({commandType:"",commandText:""}),E=Object(c["reactive"])({total:0,commandDataList:[]}),D=Object(c["reactive"])({commandType:[{required:!0,message:"数据类型不能为空",trigger:"change"}],commandText:[{required:!0,message:"命令文本不能为空",trigger:"blur"},{validator:I,trigger:"blur"}]}),_=Object(c["ref"])(1);function I(e,t,a){"number"===C.commandType?/^\d+$/.test(t)?a():a(new Error("命令应为全数字组成")):a()}function k(){console.log("cancel"),L()}function S(e){e.validate(e=>{e&&G()})}function L(){t.value=!1,a.value.resetFields(["commandText","commandType"])}function M(){t.value=!0}function G(){w.value=!0,"number"===C.commandType&&(C.commandText=parseInt(C.commandText)),Object(o["i"])({productId:l.productId,deviceId:l.deviceId,commandText:C.commandText,commandType:C.commandType}).then(e=>{200===e.code&&(Object(d["a"])({type:"success",message:"下发成功"}),L(),B())}).finally(()=>{w.value=!1})}Object(c["watch"])(()=>_.value,()=>{B(_.value)});const Y=Object(c["ref"])(!1);function B(e=1,t=8){Y.value=!0,Object(o["e"])({page:e,pageSize:t,productId:l.productId,deviceId:l.deviceId}).then(e=>{200===e.code&&(E.total=e.data.total,E.commandDataList.splice(0),E.commandDataList.push(...e.data.commandList),E.commandDataList.forEach(e=>{e.createDate=Object(r["a"])(e.createDate)}))},()=>{Object(d["a"])({type:"error",message:"网络错误"})}).finally(()=>{Y.value=!1})}return Object(c["onMounted"])(()=>{B()}),(e,o)=>{const n=Object(c["resolveComponent"])("el-radio"),d=Object(c["resolveComponent"])("el-radio-group"),r=Object(c["resolveComponent"])("el-form-item"),l=Object(c["resolveComponent"])("el-input"),_=Object(c["resolveComponent"])("el-form"),I=Object(c["resolveComponent"])("el-button"),L=Object(c["resolveComponent"])("el-drawer"),G=Object(c["resolveComponent"])("el-table-column"),U=Object(c["resolveComponent"])("el-table"),A=Object(c["resolveComponent"])("el-pagination"),F=Object(c["resolveDirective"])("loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",m,[Object(c["createElementVNode"])("div",i,[Object(c["createVNode"])(L,{modelValue:t.value,"onUpdate:modelValue":o[3]||(o[3]=e=>t.value=e),direction:"rtl"},{header:Object(c["withCtx"])(()=>[u]),default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",b,[Object(c["createVNode"])(_,{ref_key:"commandForm",ref:a,model:C,"label-position":"left",rules:D},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(r,{label:"命令类型:",prop:"commandType"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(d,{modelValue:C.commandType,"onUpdate:modelValue":o[0]||(o[0]=e=>C.commandType=e)},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{label:"string"},{default:Object(c["withCtx"])(()=>[p]),_:1}),Object(c["createVNode"])(n,{label:"number"},{default:Object(c["withCtx"])(()=>[s]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(c["createVNode"])(r,{prop:"commandText"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{modelValue:C.commandText,"onUpdate:modelValue":o[1]||(o[1]=e=>C.commandText=e),type:"textarea",disabled:""===C.commandType,placeholder:"输入命令",clearable:"",maxlength:50,"show-word-limit":"",autosize:{minRows:5,maxRows:7}},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["model","rules"])])]),footer:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",O,[Object(c["createVNode"])(I,{onClick:k},{default:Object(c["withCtx"])(()=>[j]),_:1}),Object(c["createVNode"])(I,{type:"primary",loading:w.value,onClick:o[2]||(o[2]=e=>S(a.value))},{default:Object(c["withCtx"])(()=>[f]),_:1},8,["loading"])])]),_:1},8,["modelValue"])]),Object(c["createElementVNode"])("div",v,[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("table",null,[V,Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("span",g,Object(c["toDisplayString"])(E.total),1)])])])]),Object(c["createElementVNode"])("div",x,[Object(c["createVNode"])(I,{type:"primary",onClick:M},{default:Object(c["withCtx"])(()=>[N]),_:1})])]),Object(c["createElementVNode"])("div",T,[Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createBlock"])(U,{data:E.commandDataList,style:{width:"100%"}},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(G,{prop:"commandId",label:"命令id"}),Object(c["createVNode"])(G,{prop:"commandText",label:"命令内容"}),Object(c["createVNode"])(G,{prop:"createDate",label:"下发时间",sortable:"","sort-by":""}),Object(c["createVNode"])(G,{prop:"commandStatus",label:"命令状态"}),Object(c["createVNode"])(G,{prop:"commandResponse",label:"命令响应"})]),_:1},8,["data"])),[[F,Y.value]]),Object(c["createElementVNode"])("div",y,[Object(c["createVNode"])(A,{background:"",layout:"prev, pager, next",total:E.total,onCurrentChange:B},null,8,["total"])])])])}}},C=(a("1b06"),a("6dd4")),E=a.n(C);const D=E()(w,[["__scopeId","data-v-f39812ac"]]);t["default"]=D}}]);
//# sourceMappingURL=chunk-4dd47f34.e7e926d3.js.map