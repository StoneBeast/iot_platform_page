{"version":3,"sources":["webpack:///./src/views/productList/component/productTable.vue?e914","webpack:///./src/apis/user.js","webpack:///./src/utils/formatDate.js","webpack:///./src/apis/product.js","webpack:///./src/components/layoutAvatarHeader.vue?928f","webpack:///./src/components/layoutHeader.vue?97b1","webpack:///./src/components/layoutHeader.vue","webpack:///./src/components/layoutHeader.vue?c71c","webpack:///./src/components/layoutAvatarHeader.vue","webpack:///./src/components/layoutAvatarHeader.vue?b165","webpack:///./src/views/productList/index.vue?20a1","webpack:///./node_modules/.pnpm/mitt@3.0.0/node_modules/mitt/dist/mitt.mjs","webpack:///./src/utils/mitt.js","webpack:///./src/views/productList/component/productTable.vue","webpack:///./src/views/productList/component/productTable.vue?519e","webpack:///./src/views/productList/component/editProductDrawer.vue","webpack:///./src/views/productList/component/editProductDrawer.vue?952c","webpack:///./src/views/productList/index.vue","webpack:///./src/views/productList/index.vue?c214"],"names":["login","data","request","url","method","getUserInfo","getEmailCode","emailLogin","register","formatDate","time","format","date","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","min","getMinutes","sec","getSeconds","preArr","Array","apply","map","elem","index","replace","fetchProductList","params","addUpdateProduct","deleteProduct","fetchProductData","fetchEditOptions","fetchConnectedDevice","fetchUploadDeviceCount","router","useRouter","handleBackLogin","push","name","__exports__","userStore","useUserStore","handleLogOut","command","$reset","resetUserToken","resetRouter","ElMessage","type","message","goBack","then","res","code","userName","avatarUrl","all","n","Map","on","t","e","i","get","set","off","splice","indexOf","emit","slice","emitter","mitt","productId","ref","isLoading","inject","upDateLoading","upDateShowDrawer","handleDeleteProduct","value","emits","handleUpdateProduct","handleGetProductId","title","props","productItemDataList","handleToProductPage","target","classList","contains","productData","upProductDetailData","upDateDrawerTitle","createFrom","isShowDrawer","options","reactive","industryOptions","productTypeOptions","accessAgreementOptions","onMounted","watch","newVal","productDetailData","productName","productIndustry","productType","productAbout","accessNetworks","accessAgreement","rules","required","trigger","max","handleAddProduct","validate","isPass","resetFields","productCount","drawerTitle","getProductList","isShowLoading","provide","isDrawer","newTitle","handleHasAddProduct","handleGetProductList","page","query","pageSize","response","total","products","rej","handleEditProduct","console","log"],"mappings":"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","file":"js/chunk-c3d27e0a.e1b08bf2.js","sourcesContent":["export * from \"-!../../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/index.js??ref--1-1!./productTable.vue?vue&type=style&index=0&id=08a90e6d&scoped=true&lang=css\"","import request from '@/utils/axios'\r\n\r\nexport function login(data) {\r\n  return request({\r\n    url: '/api/user/login',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\n\r\nexport function getUserInfo() {\r\n  return request({\r\n    url: 'api/user/getUserInfo',\r\n    method: 'GET'\r\n  })\r\n}\r\n\r\nexport function getEmailCode(data) {\r\n  return request({\r\n    url: '/api/user/getEmailCode',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\nexport function emailLogin(data) {\r\n  return request({\r\n    url: '/api/user/emailLogin',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\nexport function register(data) {\r\n  return request({\r\n    url: '/api/user/register',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\n","export function formatDate(time, format = 'YY-MM-DD hh:mm:ss') {\r\n  const date = new Date(time)\r\n\r\n  const year = date.getFullYear()\r\n  const month = date.getMonth() + 1 // 月份是从0开始的\r\n  const day = date.getDate()\r\n  const hour = date.getHours()\r\n  const min = date.getMinutes()\r\n  const sec = date.getSeconds()\r\n  const preArr = Array.apply(null, Array(10)).map(function(elem, index) {\r\n    return '0' + index\r\n  })\r\n  // 开个长度为10的数组 格式为 00 01 02 03\r\n\r\n  return format.replace(/YY/g, year)\r\n    .replace(/MM/g, preArr[month] || month)\r\n    .replace(/DD/g, preArr[day] || day)\r\n    .replace(/hh/g, preArr[hour] || hour)\r\n    .replace(/mm/g, preArr[min] || min)\r\n    .replace(/ss/g, preArr[sec] || sec)\r\n}\r\n","import request from '@/utils/axios'\r\n\r\nexport function fetchProductList(params) {\r\n  return request({\r\n    url: '/api/data/fetchProductList',\r\n    method: 'GET',\r\n    params\r\n  })\r\n}\r\n\r\nexport function addUpdateProduct(data) {\r\n  return request({\r\n    url: '/api/data/addUpdateProduct',\r\n    method: 'POST',\r\n    data\r\n  })\r\n}\r\n\r\nexport function deleteProduct(params) {\r\n  return request({\r\n    url: '/api/data/deleteProduct',\r\n    method: 'DELETE',\r\n    params\r\n  })\r\n}\r\n\r\nexport function fetchProductData(params) {\r\n  return request({\r\n    url: '/api/data/fetchProductData',\r\n    method: 'GET',\r\n    params\r\n  })\r\n}\r\n\r\nexport function fetchEditOptions() {\r\n  return request({\r\n    url: '/api/data/fetchEditOptions',\r\n    method: 'GET'\r\n  })\r\n}\r\n\r\nexport function fetchConnectedDevice(params) {\r\n  return request({\r\n    url: '/api/data/fetchConnectedDevice',\r\n    method: 'GET',\r\n    params\r\n  })\r\n}\r\n\r\nexport function fetchUploadDeviceCount(params) {\r\n  return request({\r\n    url: '/api/data/fetchUploadDeviceCount',\r\n    method: 'GET',\r\n    params\r\n  })\r\n}\r\n","export * from \"-!../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/index.js??ref--1-1!./layoutAvatarHeader.vue?vue&type=style&index=0&id=315407ac&scoped=true&lang=css\"","export * from \"-!../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/index.js??ref--1-1!./layoutHeader.vue?vue&type=style&index=0&id=89c18978&scoped=true&lang=css\"","<template>\r\n  <div id=\"header\">\r\n    <div id=\"back-icon\">\r\n      <slot name=\"backIcon\" />\r\n    </div>\r\n    <div id=\"icon-logo\" class=\"slot\">\r\n      <img src=\"https://img1.imgtp.com/2022/10/15/TP8TMu93.png\" alt=\"logo\" height=\"48\" width=\"78\" @click=\"handleBackLogin\">\r\n    </div>\r\n    <div id=\"avatar\" class=\"slot\">\r\n      <slot name=\"avatar\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useRouter } from 'vue-router'\r\nconst router = useRouter()\r\n\r\nfunction handleBackLogin() {\r\n  router.push({ name: 'login' })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#header {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: #fefefe;\r\n  box-shadow: #b2b2b2 0 3px 10px;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 999;\r\n}\r\n#back-icon {\r\n  margin-left: 2em;\r\n  width: 92px;\r\n}\r\n#icon-logo {\r\n  margin-right: auto;\r\n  margin-left: 3%;\r\n  background-color: #0093E9;\r\n  background-image: linear-gradient(151deg, #0093E9 0%, #80D0C7 68%);\r\n  border-radius: 10px;\r\n}\r\n#avatar {\r\n  margin-right: 3em;\r\n}\r\n.slot {\r\n  margin-top: 3px;\r\n  margin-bottom: 3px;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","import script from \"./layoutHeader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./layoutHeader.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./layoutHeader.vue?vue&type=style&index=0&id=89c18978&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\javaWeb\\\\vuePro\\\\xin_gong_ke\\\\iot-page\\\\node_modules\\\\.pnpm\\\\vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-89c18978\"]])\n\nexport default __exports__","<template>\r\n  <layout-header>\r\n    <template #backIcon>\r\n      <el-page-header @back=\"goBack\" />\r\n    </template>\r\n    <template #avatar>\r\n      <el-dropdown trigger=\"click\" @command=\"handleLogOut\">\r\n        <el-avatar :src=\"userStore.avatarUrl\" />\r\n        <template #dropdown>\r\n          <el-dropdown-menu>\r\n            <li style=\"text-align: center; color: #8cbeff\">\r\n              <span id=\"text-dropdown-menu\">{{ userStore.userName }}</span>\r\n            </li>\r\n            <el-dropdown-item command=\"logOut\">退出登录</el-dropdown-item>\r\n          </el-dropdown-menu>\r\n        </template>\r\n      </el-dropdown>\r\n    </template>\r\n  </layout-header>\r\n</template>\r\n\r\n<script setup>\r\nimport LayoutHeader from '@/components/layoutHeader'\r\nimport { useUserStore } from '@/store/user'\r\nimport { useRouter } from 'vue-router'\r\nimport { resetRouter } from '@/router'\r\nimport { ElMessage } from 'element-plus'\r\nimport { getUserInfo } from '@/apis/user'\r\n\r\nconst userStore = useUserStore()\r\nconst router = useRouter()\r\n\r\ngetUserInfo().then(res => {\r\n  if (res.code === 200) {\r\n    userStore.userName = res.data.userName\r\n    userStore.avatarUrl = res.data.avatarUrl\r\n  }\r\n}, () => {\r\n  ElMessage({\r\n    type: 'error',\r\n    message: 'error'\r\n  })\r\n})\r\nfunction handleLogOut(command) {\r\n  if (command === 'logOut') {\r\n    userStore.$reset()\r\n    userStore.resetUserToken()\r\n    resetRouter()\r\n    router.push('/')\r\n    ElMessage({\r\n      type: 'success',\r\n      message: '退出成功'\r\n    })\r\n  }\r\n}\r\nfunction goBack() {\r\n  router.push({ name: 'productList' })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#avatar>div>span:hover {\r\n  border: #72b2ff 2px solid;\r\n  transition: all 300ms;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","import script from \"./layoutAvatarHeader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./layoutAvatarHeader.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./layoutAvatarHeader.vue?vue&type=style&index=0&id=315407ac&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\javaWeb\\\\vuePro\\\\xin_gong_ke\\\\iot-page\\\\node_modules\\\\.pnpm\\\\vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-315407ac\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa/node_modules/vue-loader/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=36982a08&scoped=true&lang=css\"","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\r\n\r\nconst emitter = mitt()\r\n\r\nexport default emitter\r\n","<template>\r\n  <div id=\"product-table\" v-loading=\"isLoading\">\r\n    <div id=\"product-list\">\r\n      <el-row v-for=\"(item, index) in props.productItemDataList\" :key=\"index\" class=\"item\" @click=\"handleToProductPage(index, $event)\">\r\n        <el-col :span=\"8\">\r\n          <div class=\"product-item-name\" style=\"font-size: 1.5em;\"><span class=\"text-product-item-name\">{{ item.productName }}</span></div>\r\n          <div class=\"product-tag\">\r\n            <div class=\"product-type\" style=\"background-color: #e6f1ff; padding: 2px 8px\">{{ item.productType }}</div>\r\n            <div class=\"product-active\">\r\n              <span class=\"edit-product-item manage-product-item\" style=\"cursor:pointer\" @click=\"handleUpdateProduct(index)\">编辑</span>\r\n              <el-popconfirm\r\n                title=\"确认删除?\"\r\n                confirm-button-text=\"确认\"\r\n                cancel-button-text=\"取消\"\r\n                confirm-button-type=\"danger\"\r\n                @confirm=\"handleDeleteProduct\"\r\n              >\r\n                <template #reference>\r\n                  <span class=\"delete-product-item manage-product-item\" style=\"cursor:pointer\" @click=\"handleGetProductId(index)\">删除</span>\r\n                </template>\r\n              </el-popconfirm>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"16\">\r\n          <table class=\"table-product-info\">\r\n            <tr class=\"item-tr-title\">\r\n              <td>产品ID</td>\r\n              <td>设备数</td>\r\n              <td>创建时间</td>\r\n            </tr>\r\n            <tr class=\"item-tr-label\">\r\n              <td>{{ item.productId }}</td>\r\n              <td>{{ item.deviceCount }}</td>\r\n              <td>{{ formatDate(new Date(Date.parse(item.createDate)), 'YY-MM-DD') }}</td>\r\n            </tr>\r\n          </table>\r\n        </el-col>\r\n      </el-row>\r\n      <el-empty v-show=\"!props.productItemDataList.length\" description=\"暂无产品\" />\r\n    </div>\r\n    <div id=\"pagination\">\r\n      <el-pagination\r\n        background\r\n        layout=\"prev, pager, next\"\r\n        :total=\"itemCount\"\r\n        :page-size=\"3\"\r\n        @current-change=\"(e) => {emits('turnPage', {page: e, pageSize: 3})}\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, defineEmits, ref, inject } from 'vue'\r\nimport { deleteProduct, fetchProductData } from '@/apis/product'\r\nimport { ElMessage } from 'element-plus'\r\nimport emitter from '@/utils/mitt'\r\nimport { formatDate } from '@/utils/formatDate'\r\nimport { useRouter } from 'vue-router'\r\n\r\nconst props = defineProps({\r\n  productItemDataList: {\r\n    type: Array,\r\n    default() {\r\n      return []\r\n    }\r\n  },\r\n  itemCount: {\r\n    type: Number,\r\n    default() {\r\n      return 0\r\n    }\r\n  }\r\n})\r\nconst emits = defineEmits(['turnPage', 'hasDeleteProduct', 'editProduct'])\r\n\r\nconst productId = ref('')\r\nconst router = useRouter()\r\nconst isLoading = inject('isLoading')\r\nconst upDateLoading = inject('upDateLoading')\r\nconst upDateShowDrawer = inject('upDateShowDrawer')\r\n\r\nfunction handleDeleteProduct() {\r\n  upDateLoading(true)\r\n  deleteProduct({ productId: productId.value }).then(res => {\r\n    if (res.code === 200) {\r\n      emits('hasDeleteProduct')\r\n      ElMessage({\r\n        message: '删除成功',\r\n        type: 'success'\r\n      })\r\n    } else {\r\n      ElMessage({\r\n        message: res.message,\r\n        type: 'error'\r\n      })\r\n    }\r\n    upDateLoading(false)\r\n  })\r\n}\r\n\r\nfunction handleUpdateProduct(index) {\r\n  handleGetProductId(index)\r\n  fetchProductData({ productId: productId.value }).then(res => {\r\n    if (res.code === 200) {\r\n      emitter.emit('upProductDetailData', { data: res.data, title: '编辑产品信息' })\r\n      upDateShowDrawer(true)\r\n    } else {\r\n      ElMessage({\r\n        type: 'error',\r\n        message: '获取信息失败'\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nfunction handleGetProductId(index) {\r\n  productId.value = props.productItemDataList[index].productId\r\n}\r\n\r\nfunction handleToProductPage(index, e) {\r\n  if (!e.target.classList.contains('manage-product-item')) {\r\n    handleGetProductId(index)\r\n    router.push(`/product/${productId.value}/index`)\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  #product-table {\r\n    background-color: #f5f6f7;\r\n  }\r\n  .item {\r\n    background-color: white;\r\n    margin-bottom: 1em;\r\n    border: #eeeeee 1px solid;\r\n    margin-left: 8%;\r\n    margin-right: 8%;\r\n    padding: 2em 5em;\r\n    transition: transform 300ms;\r\n    align-content: space-between;\r\n  }\r\n  .item:hover {\r\n    box-shadow: 8px 8px 10px rgb(234, 235, 239);\r\n    transform: translate(0, -2px);\r\n  }\r\n  .item:hover .text-product-item-name {\r\n    color: #57abff;\r\n    cursor: pointer;\r\n  }\r\n  .product-tag {\r\n    display: flex;\r\n    flex-direction: row;\r\n    margin-top: 1.5em;\r\n    font-size: 0.9em;\r\n    color: #57a2ff;\r\n  }\r\n  .product-active span {\r\n    margin-left: 6px;\r\n  }\r\n  .el-col table {\r\n    float: right;\r\n  }\r\n  .table-product-info {\r\n    width: 80%;\r\n  }\r\n  .item-tr-title td {\r\n    color: #747774\r\n  }\r\n  .table-product-info td {\r\n    text-align: center;\r\n    width: 10em;\r\n    height: 2.2em;\r\n  }\r\n  .item-tr-label {\r\n    font-size: 1.3em;\r\n  }\r\n  #pagination {\r\n    display: flex;\r\n    justify-content: right;\r\n    margin-right: 8%;\r\n    padding-bottom: 2em;\r\n  }\r\n</style>\r\n","import script from \"./productTable.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./productTable.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./productTable.vue?vue&type=style&index=0&id=08a90e6d&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\javaWeb\\\\vuePro\\\\xin_gong_ke\\\\iot-page\\\\node_modules\\\\.pnpm\\\\vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-08a90e6d\"]])\n\nexport default __exports__","<template>\r\n  <el-drawer v-model=\"isShowDrawer\" :direction=\"'rtl'\">\r\n    <template #header>\r\n      <div>\r\n        <h2>{{ title }}</h2>\r\n        <hr color=\"#e8eaec\">\r\n      </div>\r\n    </template>\r\n    <template #default>\r\n      <div>\r\n        <h3>产品信息</h3>\r\n        <el-form ref=\"createFrom\" :model=\"productDetailData\" :label-position=\"'top'\" :rules=\"rules\">\r\n          <el-form-item label=\"产品名称\" prop=\"productName\">\r\n            <el-input v-model=\"productDetailData.productName\" placeholder=\"请输入产品名称\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"产品行业\" prop=\"productIndustry\">\r\n            <el-select v-model=\"productDetailData.productIndustry\" placeholder=\"选择产品行业\">\r\n              <el-option v-for=\"(item, index) in options.industryOptions\" :key=\"index\" :label=\"item\" :value=\"item\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"产品类别\" prop=\"productType\">\r\n            <el-select v-model=\"productDetailData.productType\" placeholder=\"选择产品类别\">\r\n              <el-option v-for=\"(item, index) in options.productTypeOptions\" :key=\"index\" :label=\"item\" :value=\"item\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"产品简介:\" prop=\"productAbout\">\r\n            <el-input v-model=\"productDetailData.productAbout\" type=\"textarea\" placeholder=\"产品简介\" :autosize=\"{ minRows: 5,maxRows: 7 }\" />\r\n          </el-form-item>\r\n          <hr color=\"#e8eaec\">\r\n          <h3>技术参数</h3>\r\n          <el-form-item label=\"联网方式:\" prop=\"accessNetworks\">\r\n            <el-radio-group v-model=\"productDetailData.accessNetworks\">\r\n              <el-radio label=\"蜂窝网络\" />\r\n              <el-radio label=\"wifi\" />\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"设备接入协议\" prop=\"accessAgreement\">\r\n            <el-select v-model=\"productDetailData.accessAgreement\" placeholder=\"选择接入协议\">\r\n              <el-option v-for=\"(item, index) in options.accessAgreementOptions\" :key=\"index\" :label=\"item\" :value=\"item\" />\r\n              <!--              <el-option label=\"MQTT\" value=\"agreement1\" />-->\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </template>\r\n    <template #footer>\r\n      <div style=\"flex: auto\">\r\n        <el-button @click=\"upDateShowDrawer(false)\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleAddProduct(createFrom)\">确认</el-button>\r\n      </div>\r\n    </template>\r\n  </el-drawer>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport { ref, reactive, defineEmits, inject, watch, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { addUpdateProduct, fetchEditOptions } from '@/apis/product'\r\nimport emitter from '@/utils/mitt'\r\n\r\nemitter.on('upProductDetailData', (productData) => {\r\n  upProductDetailData(productData.data)\r\n  upDateDrawerTitle(productData.title)\r\n})\r\nconst createFrom = ref(null)\r\n\r\nconst isShowDrawer = inject('isShowDrawer')\r\nconst upDateShowDrawer = inject('upDateShowDrawer')\r\nconst title = inject('drawerTitle')\r\nconst upDateDrawerTitle = inject('upDateDrawerTitle')\r\nconst options = reactive({\r\n  industryOptions: [],\r\n  productTypeOptions: [],\r\n  accessAgreementOptions: []\r\n})\r\n\r\nonMounted(() => {\r\n  fetchEditOptions().then(res => {\r\n    if (res.code === 200) {\r\n      options.industryOptions = res.data.industryOptions\r\n      options.productTypeOptions = res.data.productTypeOptions\r\n      options.accessAgreementOptions = res.data.accessAgreementOptions\r\n    }\r\n  })\r\n})\r\n\r\nwatch(isShowDrawer, (newVal) => {\r\n  if (newVal && title.value === '添加产品') {\r\n    upProductDetailData({})\r\n  }\r\n})\r\n\r\nconst productDetailData = reactive({\r\n  productId: '',\r\n  productName: '',\r\n  productIndustry: '',\r\n  productType: '',\r\n  productAbout: '',\r\n  accessNetworks: '',\r\n  accessAgreement: ''\r\n})\r\nconst upProductDetailData = ({ productId = '', productName = '', productIndustry = '', productType = '', productAbout = '', accessNetworks = '', accessAgreement = '' }) => {\r\n  productDetailData.productId = productId\r\n  productDetailData.productName = productName\r\n  productDetailData.productIndustry = productIndustry\r\n  productDetailData.productType = productType\r\n  productDetailData.productAbout = productAbout\r\n  productDetailData.accessNetworks = accessNetworks\r\n  productDetailData.accessAgreement = accessAgreement\r\n}\r\n\r\nconst rules = reactive({\r\n  productName: [\r\n    { required: true, message: '产品名称不能为空', trigger: 'blur' },\r\n    { min: 2, max: 15, message: '长度为2-15个字符', trigger: 'blur' }\r\n  ],\r\n  productIndustry: [\r\n    {\r\n      required: true,\r\n      message: '产品行业不能为空',\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  productType: [\r\n    {\r\n      required: true,\r\n      message: '产品类别不能为空',\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  accessNetworks: [\r\n    {\r\n      required: true,\r\n      message: '联网方式不能为空',\r\n      trigger: 'blur'\r\n    }\r\n  ],\r\n  accessAgreement: [\r\n    {\r\n      required: true,\r\n      message: '设备接入协议不能为空',\r\n      trigger: 'blur'\r\n    }\r\n  ]\r\n})\r\n\r\nconst emits = defineEmits(['hasAddProduct'])\r\n\r\nfunction handleAddProduct(createFrom) {\r\n  createFrom.validate((isPass) => {\r\n    if (isPass) {\r\n    //  发送请求\r\n      addUpdateProduct(productDetailData).then(res => {\r\n        if (res.code === 200) {\r\n          const message = (title.value === '添加产品' ? '添加成功' : '修改成功')\r\n          ElMessage({\r\n            message: message,\r\n            type: 'success'\r\n          })\r\n          emits('hasAddProduct', true)\r\n          upDateShowDrawer(false)\r\n          createFrom.resetFields()\r\n        } else {\r\n          ElMessage({\r\n            message: res.message,\r\n            type: 'error'\r\n          })\r\n        }\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","import script from \"./editProductDrawer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./editProductDrawer.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div id=\"product\">\r\n    <layout-avatar-header />\r\n    <div id=\"product-info\">\r\n      <div id=\"product-count\">\r\n        <span style=\"color: #747774\">产品数量(个)</span>\r\n        <span>{{ productCount }}</span>\r\n      </div>\r\n      <el-button id=\"button-add-product\" type=\"primary\" @click=\"handleAddProduct\">添加产品</el-button>\r\n    </div>\r\n    <add-product-drawer @has-add-product=\"handleHasAddProduct\" />\r\n    <ProductTable\r\n      :product-item-data-list=\"productItemDataList\"\r\n      :item-count=\"productCount\"\r\n      :is-loading=\"isLoading\"\r\n      @turn-page=\"handleGetProductList\"\r\n      @has-delete-product=\"getProductList\"\r\n      @edit-product=\"handleEditProduct\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted, provide } from 'vue'\r\nimport { fetchProductList } from '@/apis/product'\r\nimport { ElMessage } from 'element-plus'\r\nimport ProductTable from '@/views/productList/component/productTable'\r\nimport AddProductDrawer from '@/views/productList/component/editProductDrawer'\r\nimport LayoutAvatarHeader from '@/components/layoutAvatarHeader'\r\n\r\nconst productItemDataList = reactive([])\r\nconst productCount = ref(0)\r\nconst isLoading = ref(false)\r\nconst isShowDrawer = ref(false)\r\nconst drawerTitle = ref('')\r\n\r\nonMounted(() => {\r\n  getProductList()\r\n})\r\n\r\nconst upDateLoading = (isShowLoading) => {\r\n  isLoading.value = isShowLoading\r\n}\r\nprovide('isLoading', isLoading)\r\nprovide('upDateLoading', upDateLoading)\r\n\r\nconst upDateShowDrawer = (isDrawer) => {\r\n  isShowDrawer.value = isDrawer\r\n}\r\nprovide('isShowDrawer', isShowDrawer)\r\nprovide('upDateShowDrawer', upDateShowDrawer)\r\n\r\nconst upDateDrawerTitle = (newTitle) => {\r\n  drawerTitle.value = newTitle\r\n}\r\nprovide('drawerTitle', drawerTitle)\r\nprovide('upDateDrawerTitle', upDateDrawerTitle)\r\n\r\nfunction handleHasAddProduct() {\r\n  getProductList()\r\n}\r\n\r\nfunction handleGetProductList(page) {\r\n  getProductList(page)\r\n}\r\n\r\nfunction getProductList(query = { page: 1, pageSize: 3 }) {\r\n  upDateLoading(true)\r\n  fetchProductList(query).then(response => {\r\n    productCount.value = response.data.total\r\n    productItemDataList.splice(0)\r\n    productItemDataList.push(...response.data.products)\r\n    upDateLoading(false)\r\n  }, rej => {\r\n    ElMessage({\r\n      message: '获取列表失败',\r\n      type: 'error'\r\n    })\r\n  })\r\n}\r\n\r\nfunction handleAddProduct() {\r\n  upDateShowDrawer(true)\r\n  upDateDrawerTitle('添加产品')\r\n}\r\n\r\nfunction handleEditProduct(productData) {\r\n  console.log('edit!', productData)\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  #product-info {\r\n    margin-bottom: 3em;\r\n    background-color: white;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    margin-left: 8%;\r\n    margin-right: 8%;\r\n    padding: 2em 5em;\r\n    border: #eeeeee 1px solid;\r\n  }\r\n  #button-add-product {\r\n    float: right;\r\n  }\r\n  #product-count span:last-child{\r\n    font-size: 2em;\r\n    display: block;\r\n    text-align: center;\r\n  }\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=36982a08&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\javaWeb\\\\vuePro\\\\xin_gong_ke\\\\iot-page\\\\node_modules\\\\.pnpm\\\\vue-loader@16.8.3_5vqgdkn543z7gobmtemdwwisxa\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-36982a08\"]])\n\nexport default __exports__"],"sourceRoot":""}